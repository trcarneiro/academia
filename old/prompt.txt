[CONTEXTO DO PROJETO]
Este projeto segue as diretrizes rigorosas do arquivo `CLAUDE.md`. A arquitetura é modular e isolada, com uma forte ênfase na abordagem API-First. O módulo de Alunos (`Students`) é a implementação de referência para esses padrões. A interface do usuário deve seguir o princípio de "Uma Ação = Uma Tela Cheia", sem o uso de modais.

[DESCRIÇÃO DO PROBLEMA]
A tela de edição de alunos, implementada em `public/views/student-editor.html` e controlada por `public/js/modules/students.js`, apresenta vários bugs críticos que comprometem a experiência do usuário:

1.  **Dados do Perfil Incompletos:** A aba "Perfil" exibe apenas um subconjunto mínimo dos dados do aluno, enquanto o `schema.prisma` define um modelo de dados muito mais rico para as tabelas `Student` e `User`.
2.  **Sobreposição de Conteúdo das Abas:** Ao navegar entre as abas (Perfil, Financeiro, etc.), o conteúdo da aba anterior não é ocultado corretamente, resultando em uma sobreposição de informações e uma interface inutilizável.
3.  **Funcionalidade da Aba Financeira Quebrada:** A aba "Financeiro" não está funcionando conforme o esperado:
    *   Não exibe os detalhes da assinatura (`StudentSubscription`) atual do aluno.
    *   Não carrega a lista de planos de cobrança (`BillingPlan`) disponíveis para que o usuário possa fazer alterações.
    *   Falta uma funcionalidade para cancelar a assinatura existente do aluno.

[REQUISITOS ESPECÍFICOS]
Para resolver esses problemas, as seguintes alterações devem ser implementadas, seguindo estritamente as diretrizes do `CLAUDE.md`:

1.  **Correção da Navegação de Abas:**
    *   Em `public/js/modules/students.js`, modifique a lógica de navegação para garantir que, ao clicar em uma aba, o `div` de conteúdo de todas as outras abas receba `display: none;`, enquanto o `div` da aba ativa receba `display: block;`.
    *   Adicione a classe `active` apenas à aba clicada e remova-a das outras.

2.  **Melhoria da Aba de Perfil:**
    *   Modifique a função `renderProfileContent` em `public/js/modules/students.js` e o `div#profile-content` em `public/views/student-editor.html`.
    *   Exiba um formulário de edição completo (não apenas texto) com os seguintes campos, baseados nos modelos `Student` e `User` do `schema.prisma`:
        *   **Dados Pessoais:** `firstName`, `lastName`, `email`, `phone`, `cpf`, `birthDate`, `gender`.
        *   **Dados Acadêmicos:** `category`, `enrollmentDate`, `isActive`.
        *   **Informações de Emergência:** `emergencyContact`, `medicalConditions`.
        *   **Preferências:** `preferredDays`, `preferredTimes`.
    *   A rota da API `GET /api/students/:id` em `src/routes/students.ts` já deve retornar a maioria desses dados. Certifique-se de que todos os campos necessários estão sendo incluídos na consulta ao banco de dados.

3.  **Funcionalidade Completa para a Aba Financeira:**
    *   **Exibir Assinatura Atual:**
        *   Na função `loadFinancialTab` em `public/js/modules/students.js`, certifique-se de que a chamada à API `GET /api/students/:id/subscription` está funcionando e retornando os dados da assinatura.
        *   Na função `renderFinancialContent`, exiba claramente os detalhes da assinatura atual: nome do plano, preço, status e data do próximo faturamento.
    *   **Listar Planos Disponíveis e Permitir Troca:**
        *   Crie uma nova função em `students.js` para carregar todos os planos de cobrança disponíveis através de uma nova rota da API `GET /api/billing-plans`.
        *   Em `src/routes/billing_plans.ts` (crie este arquivo se não existir), implemente a rota que busca todos os `BillingPlan` ativos no banco de dados.
        *   Na `renderFinancialContent`, adicione um `<select>` (dropdown) populado com os planos disponíveis.
        *   Adicione um botão "Alterar Plano" que, ao ser clicado, executa uma chamada `PUT /api/students/:id/subscription` com o ID do novo plano.
    *   **Permitir Cancelamento da Assinatura:**
        *   Adicione um botão "Cancelar Assinatura" na `renderFinancialContent`.
        *   Este botão deve acionar uma chamada à API `DELETE /api/students/:id/subscription`.
        *   Implemente a rota `DELETE` em `src/routes/students.ts`, que deve alterar o status da assinatura para `CANCELLED` ou `INACTIVE`, em vez de deletá-la do banco de dados.

[REFERÊNCIAS TÉCNICAS]
*   **Arquivos a serem Modificados:**
    *   `public/views/student-editor.html`: Estrutura HTML das abas e formulários.
    *   `public/js/modules/students.js`: Lógica de navegação, chamadas de API e renderização de conteúdo.
    *   `src/routes/students.ts`: Ajustes nas rotas existentes e criação da rota `DELETE` para a assinatura.
    *   `src/routes/billing_plans.ts`: Novo arquivo de rota para gerenciar os planos de cobrança.
*   **Modelos do Prisma:**
    *   `Student`, `User`: Para a aba de perfil.
    *   `StudentSubscription`, `BillingPlan`: Para a aba financeira.

[RESULTADO ESPERADO]
Uma tela de edição de alunos totalmente funcional, onde:
1.  A navegação entre as abas funciona perfeitamente, sem sobreposição de conteúdo.
2.  A aba "Perfil" exibe um formulário completo e editável com todos os dados relevantes do aluno.
3.  A aba "Financeiro" mostra a assinatura atual, permite a troca de plano e o cancelamento da assinatura.
4.  Todas as interações seguem a abordagem API-First e os padrões de UX definidos no `CLAUDE.md`.