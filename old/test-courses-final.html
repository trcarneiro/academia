<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Final - Courses Module</title>
    
    <!-- Core CSS -->
    <link rel="stylesheet" href="/css/core/reset.css">
    <link rel="stylesheet" href="/css/core/variables.css">
    <link rel="stylesheet" href="/css/core/dashboard.css">
    
    <!-- Module CSS -->
    <link rel="stylesheet" href="/css/modules/courses.css">
    
    <style>
        body {
            background: #0f172a;
            color: #f8fafc;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 0;
            padding: 20px;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            font-family: monospace;
        }
        .success { background: rgba(16, 185, 129, 0.1); color: #10b981; }
        .error { background: rgba(239, 68, 68, 0.1); color: #ef4444; }
        .info { background: rgba(59, 130, 246, 0.1); color: #3b82f6; }
    </style>
</head>
<body class="courses-isolated">
    <div class="test-container">
        <div class="test-header">
            <h1>üß™ Teste Final - Courses Module</h1>
            <p>Seguindo padr√µes do CLAUDE.md</p>
        </div>

        <div id="status"></div>

        <!-- Simulando a estrutura real do sistema -->
        <div class="courses-header">
            <div class="header-content">
                <div class="header-left">
                    <button class="back-button" onclick="history.back()">
                        <span>‚Üê</span>
                        <span>Voltar</span>
                    </button>
                    <h1 class="page-title">
                        <span class="title-icon">üìö</span>
                        Gest√£o de Cursos
                    </h1>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" onclick="window.location.href='/views/course-editor.html'">
                        <span>‚ûï</span>
                        <span>Novo Curso</span>
                    </button>
                </div>
            </div>
        </div>

        <div class="controls-section">
            <div class="controls-container">
                <div class="search-container">
                    <div class="search-icon">üîç</div>
                    <input 
                        type="text" 
                        id="searchInput" 
                        class="search-input" 
                        placeholder="Buscar cursos, descri√ß√µes..."
                        autocomplete="off"
                    >
                </div>
                
                <div class="filters-container">
                    <div class="filter-group">
                        <label class="filter-label" for="categoryFilter">Categoria</label>
                        <select id="categoryFilter" class="filter-select">
                            <option value="all">Todas</option>
                            <option value="BEGINNER">Iniciante</option>
                            <option value="INTERMEDIATE">Intermedi√°rio</option>
                            <option value="ADVANCED">Avan√ßado</option>
                            <option value="EXPERT">Especialista</option>
                            <option value="MASTER">Mestre</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label class="filter-label" for="statusFilter">Status</label>
                        <select id="statusFilter" class="filter-select">
                            <option value="all">Todos</option>
                            <option value="ACTIVE">Ativos</option>
                            <option value="INACTIVE">Inativos</option>
                        </select>
                    </div>
                </div>
                
                <button class="btn btn-secondary" onclick="refreshCourses()" title="Atualizar">
                    <span>üîÑ</span>
                    <span>Atualizar</span>
                </button>
            </div>
        </div>

        <div class="main-content">
            <!-- Loading State -->
            <div id="loadingState" class="loading-container">
                <div class="loading-spinner"></div>
                <div class="loading-text">Carregando cursos...</div>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none;">
                <div class="empty-icon">üìö</div>
                <h3>Nenhum curso encontrado</h3>
                <p>Comece criando seu primeiro curso para come√ßar a organizar seu programa de treinamento.</p>
                <button class="btn btn-primary" onclick="window.location.href='/views/course-editor.html'">
                    <span>‚ûï</span>
                    <span>Criar Primeiro Curso</span>
                </button>
            </div>

            <!-- Courses Container -->
            <div id="coursesContainer" class="courses-container" style="display: none;">
                <div class="courses-grid" id="coursesGrid">
                    <!-- Courses will be dynamically loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script>
        function addStatus(message, type = 'info') {
            const status = document.getElementById('status');
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            status.appendChild(div);
        }

        // Capture console logs
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addStatus(args.join(' '), 'info');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addStatus(args.join(' '), 'error');
        };

        // Test API availability
        async function testAPI() {
            try {
                const response = await fetch('/api/courses');
                if (response.ok) {
                    const data = await response.json();
                    addStatus(`‚úÖ API working - ${data.data?.length || 0} courses found`, 'success');
                } else {
                    addStatus(`‚ùå API error - Status: ${response.status}`, 'error');
                }
            } catch (error) {
                addStatus(`‚ùå API unavailable: ${error.message}`, 'error');
            }
        }

        // Auto-start tests
        window.addEventListener('load', () => {
            addStatus('üöÄ Starting tests...', 'info');
            testAPI();
        });
    </script>

    <!-- Load the courses module -->
    <script src="/js/modules/courses.js"></script>
</body>
</html>
