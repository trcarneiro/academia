<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Enhanced Courses Module</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; }
        .courses-header { background: #f0f0f0; padding: 10px; margin: 10px 0; }
        .courses-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 15px; }
        .loading-container { display: flex; justify-content: center; align-items: center; padding: 40px; }
        .empty-state { display: none; text-align: center; padding: 40px; }
        .courses-container { display: none; }
        .course-card { border: 1px solid #ddd; padding: 15px; border-radius: 5px; }
        .status-badge { padding: 2px 8px; border-radius: 3px; font-size: 12px; }
        .status-active { background: #d4edda; color: #155724; }
        .status-inactive { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>Test Enhanced Courses Module</h1>
    
    <div class="test-section">
        <h2>Manual Test Controls</h2>
        <button onclick="testDirectInit()">Test Direct Init</button>
        <button onclick="testRetryInit()">Test Retry Init</button>
        <button onclick="testApiCall()">Test API Call</button>
        <button onclick="clearConsole()">Clear Console</button>
    </div>
    
    <div class="test-section">
        <h2>Courses Module Content</h2>
        <div class="courses-header">
            <h3>GestÃ£o de Cursos</h3>
        </div>
        
        <div id="loadingState" class="loading-container">
            <div>ðŸ”„ Carregando cursos...</div>
        </div>
        
        <div id="emptyState" class="empty-state" style="display: none;">
            <div>ðŸ“­ Nenhum curso encontrado</div>
        </div>
        
        <div id="coursesContainer" class="courses-container" style="display: none;">
            <div class="courses-grid" id="coursesGrid">
                <!-- Courses will be rendered here -->
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h2>Console Output</h2>
        <div id="consoleOutput" style="background: #f8f9fa; padding: 10px; height: 200px; overflow-y: auto; font-family: monospace; font-size: 12px;"></div>
    </div>

    <script src="/js/modules/courses.js"></script>
    
    <script>
        // Capture console logs
        const originalLog = console.log;
        const originalError = console.error;
        const consoleOutput = document.getElementById('consoleOutput');
        
        function addToConsole(type, ...args) {
            const message = args.map(arg => 
                typeof arg === 'object' ? JSON.stringify(arg, null, 2) : String(arg)
            ).join(' ');
            
            const div = document.createElement('div');
            div.style.color = type === 'error' ? 'red' : type === 'warn' ? 'orange' : 'black';
            div.textContent = `[${type.toUpperCase()}] ${new Date().toLocaleTimeString()}: ${message}`;
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole('log', ...args);
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole('error', ...args);
        };
        
        // Test functions
        function testDirectInit() {
            console.log('ðŸ§ª Testing direct initialization...');
            if (typeof window.initializeCoursesModule === 'function') {
                window.initializeCoursesModule();
            } else {
                console.error('âŒ initializeCoursesModule not available');
            }
        }
        
        function testRetryInit() {
            console.log('ðŸ§ª Testing retry initialization...');
            if (typeof window.initializeCoursesModuleWithRetry === 'function') {
                window.initializeCoursesModuleWithRetry();
            } else {
                console.error('âŒ initializeCoursesModuleWithRetry not available');
            }
        }
        
        async function testApiCall() {
            console.log('ðŸ§ª Testing API call...');
            try {
                const response = await fetch('/api/courses');
                const data = await response.json();
                console.log('âœ… API Response:', data);
            } catch (error) {
                console.error('âŒ API Error:', error);
            }
        }
        
        function clearConsole() {
            consoleOutput.innerHTML = '';
        }
        
        // Auto-start test
        setTimeout(() => {
            console.log('ðŸš€ Starting automatic test...');
            testRetryInit();
        }, 1000);
    </script>
</body>
</html>
