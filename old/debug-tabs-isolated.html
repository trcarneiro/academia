<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Debug - Sistema de Tabs</title>
    <link rel="stylesheet" href="public/css/style.css">
    <link rel="stylesheet" href="public/css/modules/students.css">
    <link rel="stylesheet" href="public/css/modules/student-editor.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #0F172A;
            color: #F8FAFC;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        .debug-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid #334155;
            border-radius: 12px;
            padding: 1rem;
            max-width: 300px;
            z-index: 1000;
        }
        
        .debug-log {
            max-height: 200px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.5);
            padding: 0.5rem;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }
        
        .test-container {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #334155;
        }
    </style>
</head>
<body>
    <div class="debug-panel">
        <h4>üîç Debug Panel</h4>
        <button onclick="debugTabs()" style="background: #3B82F6; color: white; border: none; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem;">
            Verificar Tabs
        </button>
        <button onclick="testTabSwitch()" style="background: #10B981; color: white; border: none; padding: 0.5rem; border-radius: 4px; margin-bottom: 0.5rem;">
            Testar Troca
        </button>
        <div id="debugLog" class="debug-log"></div>
    </div>

    <div class="test-container">
        <h1>üß™ Teste Isolado - Sistema de Tabs</h1>
        <p>Esta √© uma vers√£o simplificada para testar apenas o sistema de tabs</p>
    </div>

    <div class="students-isolated">
        <!-- Page Header -->
        <div class="page-header">
            <div>
                <h1 id="editPageStudentName">Jo√£o Silva (Teste)</h1>
                <p id="editPageStudentId">ID: test-123</p>
                <p id="editPageStudentCategory">Categoria: ADULT</p>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-container">
            <div class="tab-navigation">
                <button class="page-tab active" data-tab="profile">
                    üë§ Perfil
                </button>
                <button class="page-tab" data-tab="financial">
                    üí∞ Assinatura
                </button>
                <button class="page-tab" data-tab="enrollments">
                    üìö Matr√≠culas
                </button>
                <button class="page-tab" data-tab="classes">
                    üè´ Turmas
                </button>
                <button class="page-tab" data-tab="progress">
                    üìà Progresso
                </button>
                <button class="page-tab" data-tab="insights">
                    üß† Insights
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Left Column - Tab Content Container with Proper Isolation -->
            <div class="tab-content-container">
                <!-- Profile Tab Content -->
                <div id="profile-content" class="tab-content active">
                    <div class="form-section">
                        <h4>üë§ Informa√ß√µes do Perfil</h4>
                        <p>Este √© o conte√∫do da aba Perfil.</p>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Nome Completo</label>
                                <input type="text" value="Jo√£o Silva" readonly>
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" value="joao@exemplo.com" readonly>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Financial Tab Content -->
                <div id="financial-content" class="tab-content">
                    <div class="form-section">
                        <h4>üí∞ Dados da Assinatura</h4>
                        <p>Este √© o conte√∫do da aba Assinatura.</p>
                        <div class="subscription-card">
                            <h5>Plano Mensal</h5>
                            <p>R$ 149,90/m√™s</p>
                            <p>Status: Ativo</p>
                        </div>
                    </div>
                </div>
                
                <!-- Enrollments Tab Content -->
                <div id="enrollments-content" class="tab-content">
                    <div class="form-section">
                        <h4>üìö Matr√≠culas Ativas</h4>
                        <p>Este √© o conte√∫do da aba Matr√≠culas.</p>
                        <div class="enrollment-card">
                            <h5>Krav Maga B√°sico</h5>
                            <p>Progresso: 45%</p>
                        </div>
                    </div>
                </div>
                
                <!-- Classes Tab Content -->
                <div id="classes-content" class="tab-content">
                    <div class="form-section">
                        <h4>üè´ Turmas Ativas</h4>
                        <p>Este √© o conte√∫do da aba Turmas.</p>
                        <div>
                            <p>Turma: Segunda/Quarta 19h</p>
                            <p>Instrutor: Prof. Carlos</p>
                        </div>
                    </div>
                </div>
                
                <!-- Progress Tab Content -->
                <div id="progress-content" class="tab-content">
                    <div class="form-section">
                        <h4>üìà Progresso Geral</h4>
                        <p>Este √© o conte√∫do da aba Progresso.</p>
                        <div>
                            <p>Aulas completadas: 15/30</p>
                            <p>Presen√ßa: 85%</p>
                        </div>
                    </div>
                </div>
                
                <!-- Insights Tab Content -->
                <div id="insights-content" class="tab-content">
                    <div class="form-section">
                        <h4>üß† Insights e An√°lises</h4>
                        <p>Este √© o conte√∫do da aba Insights.</p>
                        <div>
                            <p>Recomenda√ß√£o: Aumentar frequ√™ncia de treinos</p>
                            <p>Pr√≥ximo objetivo: Faixa amarela</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column - Sidebar -->
            <div id="editPageSidebar">
                <div class="sidebar-card">
                    <h4>üìä Estat√≠sticas</h4>
                    <div>
                        <p>Cursos Ativos: <strong>2</strong></p>
                        <p>Turmas: <strong>1</strong></p>
                        <p>Taxa Presen√ßa: <strong>85%</strong></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Debug functions
        function debugLog(message) {
            const log = document.getElementById('debugLog');
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML += `[${timestamp}] ${message}<br>`;
            log.scrollTop = log.scrollHeight;
            console.log(message);
        }

        function debugTabs() {
            debugLog('=== VERIFICANDO SISTEMA DE TABS ===');
            
            const tabs = document.querySelectorAll('.page-tab');
            const contents = document.querySelectorAll('.tab-content');
            
            debugLog(`Encontrados ${tabs.length} tabs`);
            debugLog(`Encontrados ${contents.length} conte√∫dos`);
            
            tabs.forEach((tab, index) => {
                const dataTab = tab.getAttribute('data-tab');
                const hasActive = tab.classList.contains('active');
                debugLog(`Tab ${index}: data-tab="${dataTab}", active=${hasActive}`);
            });
            
            contents.forEach((content, index) => {
                const id = content.id;
                const hasActive = content.classList.contains('active');
                debugLog(`Content ${index}: id="${id}", active=${hasActive}`);
            });
        }

        function testTabSwitch() {
            debugLog('=== TESTANDO TROCA DE TABS ===');
            
            const tabs = ['profile', 'financial', 'enrollments', 'classes', 'progress', 'insights'];
            let currentIndex = 0;
            
            function switchNext() {
                if (currentIndex < tabs.length) {
                    const tabName = tabs[currentIndex];
                    debugLog(`Testando switch para: ${tabName}`);
                    
                    if (typeof switchTab === 'function') {
                        switchTab(tabName);
                    } else {
                        // Manual switch for testing
                        document.querySelectorAll('.page-tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        const targetTab = document.querySelector(`[data-tab="${tabName}"]`);
                        const targetContent = document.getElementById(`${tabName}-content`);
                        
                        if (targetTab && targetContent) {
                            targetTab.classList.add('active');
                            targetContent.classList.add('active');
                            debugLog(`‚úÖ Switch manual para ${tabName} OK`);
                        } else {
                            debugLog(`‚ùå Elementos n√£o encontrados para ${tabName}`);
                        }
                    }
                    
                    currentIndex++;
                    setTimeout(switchNext, 1000);
                } else {
                    debugLog('=== TESTE COMPLETO ===');
                }
            }
            
            switchNext();
        }

        // Initialize debug
        debugLog('Debug panel iniciado');
        debugLog('Clique nos bot√µes para testar o sistema');
    </script>

    <!-- Include JavaScript Module -->
    <script src="public/js/modules/student-editor.js"></script>
</body>
</html>
