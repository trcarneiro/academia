<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Student Navigation</title>
</head>
<body>
    <h1>Test Student Navigation Flow</h1>
    
    <button onclick="testStudentEdit()">Test Edit Student d61ae58e-8db6-4d96-a909-887df891ce08</button>
    <button onclick="testAPICall()">Test Direct API Call</button>
    <button onclick="checkLocalStorage()">Check localStorage</button>
    <button onclick="clearLocalStorage()">Clear localStorage</button>
    
    <div id="output"></div>
    
    <script>
        function log(message) {
            const output = document.getElementById('output');
            output.innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }
        
        function testStudentEdit() {
            log('ğŸ”„ Testing editStudent function...');
            
            const studentId = 'd61ae58e-8db6-4d96-a909-887df891ce08';
            
            // Simulate the editStudent function
            const editorData = {
                mode: 'edit',
                studentId: studentId,
                timestamp: Date.now()
            };
            
            log('ğŸ“± Storing in localStorage: ' + JSON.stringify(editorData));
            localStorage.setItem('studentEditorMode', JSON.stringify(editorData));
            
            log('âœ… Data stored. Now you can navigate to student-editor.html');
        }
        
        async function testAPICall() {
            log('ğŸ”„ Testing direct API call...');
            
            const studentId = 'd61ae58e-8db6-4d96-a909-887df891ce08';
            
            try {
                const response = await fetch(`/api/students/${studentId}`);
                const result = await response.json();
                
                log('ğŸ“Š API Response: ' + JSON.stringify(result, null, 2));
                
                if (result.success && result.data) {
                    log('âœ… Student found: ' + result.data.name);
                } else {
                    log('âŒ Student not found or API error');
                }
            } catch (error) {
                log('âŒ API Error: ' + error.message);
            }
        }
        
        function checkLocalStorage() {
            log('ğŸ” Checking localStorage...');
            
            const data = localStorage.getItem('studentEditorMode');
            if (data) {
                log('ğŸ“± Found data: ' + data);
                try {
                    const parsed = JSON.parse(data);
                    log('ğŸ“Š Parsed data: ' + JSON.stringify(parsed, null, 2));
                } catch (e) {
                    log('âŒ Error parsing data: ' + e.message);
                }
            } else {
                log('âŒ No data found in localStorage');
            }
        }
        
        function clearLocalStorage() {
            localStorage.removeItem('studentEditorMode');
            log('ğŸ—‘ï¸ localStorage cleared');
        }
    </script>
</body>
</html>
