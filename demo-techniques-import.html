<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèãÔ∏è Demonstra√ß√£o - Importa√ß√£o de T√©cnicas | Academia Krav Maga</title>
    
    <!-- FontAwesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Core CSS -->
    <link href="/css/shared/app.css" rel="stylesheet">
    <link href="/css/modules/activities.css" rel="stylesheet">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }
        
        .demo-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .demo-header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }
        
        .demo-header p {
            margin: 1rem 0 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .demo-instructions {
            max-width: 800px;
            margin: 0 auto 2rem auto;
            padding: 0 2rem;
        }
        
        .instruction-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
        }
        
        .instruction-card h3 {
            margin: 0 0 1rem 0;
            color: #334155;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .json-sample {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        
        .download-section {
            text-align: center;
            margin: 2rem 0;
        }
        
        .download-btn {
            background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
        }
        
        #demo-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>üèãÔ∏è Demonstra√ß√£o - Importa√ß√£o de T√©cnicas</h1>
        <p>Sistema de importa√ß√£o em lote para t√©cnicas de Krav Maga</p>
    </div>

    <div class="demo-instructions">
        <div class="instruction-card">
            <h3>üìã 1. Formato JSON Requerido</h3>
            <p>O arquivo JSON deve conter um array de objetos com a seguinte estrutura:</p>
            <div class="json-sample">
[
  {
    "id": 1,
    "name": "Defesa contra Soco Direto",
    "description": "T√©cnica fundamental de defesa contra ataque frontal com soco direto ao rosto",
    "type": "TECHNIQUE",
    "category": "DEFENSE",
    "difficulty": 2,
    "equipment": ["Luvas de prote√ß√£o"],
    "duration": 300,
    "repetitions": 10,
    "instructions": [
      "Posicione-se em stance b√°sica",
      "Bloqueie o soco com movimento de fora para dentro",
      "Contra-ataque imediatamente"
    ],
    "tips": [
      "Mantenha os olhos no oponente",
      "Use o corpo inteiro no movimento"
    ],
    "safety": [
      "Use equipamentos de prote√ß√£o",
      "Pratique com velocidade controlada"
    ]
  }
]
            </div>
        </div>

        <div class="instruction-card">
            <h3>‚úÖ 2. Campos Obrigat√≥rios</h3>
            <ul>
                <li><strong>name</strong>: Nome da t√©cnica (string)</li>
                <li><strong>description</strong>: Descri√ß√£o detalhada (string)</li>
                <li><strong>type</strong>: Tipo da atividade (TECHNIQUE, STRETCH, DRILL, EXERCISE, GAME, CHALLENGE)</li>
            </ul>
        </div>

        <div class="instruction-card">
            <h3>üéØ 3. Campos Opcionais</h3>
            <ul>
                <li><strong>category</strong>: Categoria da t√©cnica (string)</li>
                <li><strong>difficulty</strong>: N√≠vel de dificuldade (1-5)</li>
                <li><strong>equipment</strong>: Lista de equipamentos (array)</li>
                <li><strong>duration</strong>: Dura√ß√£o em segundos (number)</li>
                <li><strong>repetitions</strong>: N√∫mero de repeti√ß√µes (number)</li>
                <li><strong>instructions</strong>: Instru√ß√µes passo a passo (array)</li>
                <li><strong>tips</strong>: Dicas importantes (array)</li>
                <li><strong>safety</strong>: Cuidados de seguran√ßa (array)</li>
            </ul>
        </div>

        <div class="download-section">
            <a href="#" class="download-btn" onclick="downloadSampleJSON()">
                <i class="fas fa-download"></i>
                Baixar JSON de Exemplo
            </a>
        </div>
    </div>

    <!-- Container para o m√≥dulo de atividades -->
    <div id="demo-container"></div>

    <!-- Scripts Core -->
    <script src="/js/shared/api-client.js"></script>
    <script src="/js/shared/state-manager.js"></script>
    
    <!-- Scripts do M√≥dulo -->
    <script src="/js/modules/activities/controllers/list-controller.js"></script>

    <script>
        // Mock API Client for demo
        window.createModuleAPI = function(moduleName) {
            return {
                request: async function(endpoint, options = {}) {
                    console.log(`üîó Demo API Request: ${options.method || 'GET'} ${endpoint}`);
                    
                    if (endpoint === '/api/activities' && options.method === 'POST') {
                        // Simulate successful technique creation
                        const technique = JSON.parse(options.body);
                        console.log('üìù Creating technique:', technique.name);
                        
                        // Simulate random success/failure for demo
                        const success = Math.random() > 0.1; // 90% success rate
                        
                        await new Promise(resolve => setTimeout(resolve, 200 + Math.random() * 300));
                        
                        if (success) {
                            return {
                                success: true,
                                data: { id: Date.now(), ...technique }
                            };
                        } else {
                            return {
                                success: false,
                                message: 'T√©cnica j√° existe ou erro de valida√ß√£o'
                            };
                        }
                    }
                    
                    // Mock activities list
                    return {
                        success: true,
                        data: [],
                        totalCount: 0
                    };
                }
            };
        };

        // Mock showToast function
        window.showToast = function(message, type = 'info') {
            console.log(`üçû Toast [${type}]: ${message}`);
            
            // Create simple toast notification
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#16a34a' : type === 'error' ? '#dc2626' : type === 'warning' ? '#d97706' : '#2563eb'};
                color: white;
                padding: 1rem 1.5rem;
                border-radius: 8px;
                z-index: 10000;
                font-weight: 500;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                animation: slideIn 0.3s ease;
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        };

        // Initialize demo
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                const container = document.getElementById('demo-container');
                const listController = new ActivitiesListController(window.createModuleAPI('Activities'));
                await listController.render(container);
                console.log('‚úÖ Demo inicializada com sucesso!');
            } catch (error) {
                console.error('‚ùå Erro ao inicializar demo:', error);
            }
        });

        // Download sample JSON
        function downloadSampleJSON() {
            const sampleTechniques = [
                {
                    "id": 1,
                    "name": "Defesa contra Soco Direto",
                    "description": "T√©cnica fundamental de defesa contra ataque frontal com soco direto ao rosto. Esta t√©cnica √© essencial para iniciantes e forma a base para defesas mais avan√ßadas.",
                    "type": "TECHNIQUE",
                    "category": "DEFENSE",
                    "difficulty": 2,
                    "equipment": ["Luvas de prote√ß√£o", "Capacete"],
                    "duration": 300,
                    "repetitions": 10,
                    "instructions": [
                        "Posicione-se em stance b√°sica com p√©s afastados na largura dos ombros",
                        "Mantenha as m√£os levantadas em posi√ß√£o de guarda",
                        "Ao ver o soco chegando, execute movimento de bloco de fora para dentro",
                        "Imediatamente ap√≥s o bloco, contra-ataque com soco direto",
                        "Termine em posi√ß√£o de guarda defensiva"
                    ],
                    "tips": [
                        "Mantenha sempre os olhos no oponente, n√£o na m√£o que ataca",
                        "Use o corpo inteiro no movimento de bloco, n√£o apenas o bra√ßo",
                        "O contra-ataque deve ser imediato e explosivo",
                        "Pratique o movimento devagar antes de aumentar a velocidade"
                    ],
                    "safety": [
                        "Sempre use equipamentos de prote√ß√£o durante os treinos",
                        "Pratique com velocidade controlada nas primeiras sess√µes",
                        "Certifique-se de que h√° espa√ßo suficiente ao redor",
                        "Pare imediatamente se sentir dor ou desconforto"
                    ]
                },
                {
                    "id": 2,
                    "name": "Alongamento de Pernas",
                    "description": "Sequ√™ncia de alongamentos para preparar as pernas antes do treino de Krav Maga, focando em flexibilidade e preven√ß√£o de les√µes.",
                    "type": "STRETCH",
                    "category": "WARMUP",
                    "difficulty": 1,
                    "equipment": ["Colchonete"],
                    "duration": 600,
                    "repetitions": 1,
                    "instructions": [
                        "Comece em p√© com os p√©s afastados na largura dos quadris",
                        "Alongue o quadr√≠ceps levantando o p√© em dire√ß√£o ao gl√∫teo",
                        "Segure por 30 segundos cada perna",
                        "Alongue os isquiotibiais inclinando-se para frente",
                        "Finalize com alongamento das panturrilhas"
                    ],
                    "tips": [
                        "Respire profundamente durante todo o alongamento",
                        "N√£o force movimentos que causem dor",
                        "Mantenha o alongamento por tempo suficiente",
                        "Aque√ßa o corpo antes de alongar"
                    ],
                    "safety": [
                        "Nunca force um alongamento al√©m do limite confort√°vel",
                        "Pare se sentir dor aguda",
                        "Use superf√≠cie antiderrapante",
                        "Mantenha movimentos controlados"
                    ]
                },
                {
                    "id": 3,
                    "name": "Drill de Socos B√°sicos",
                    "description": "Exerc√≠cio repetitivo para aperfei√ßoar a t√©cnica de socos b√°sicos do Krav Maga, melhorando velocidade, precis√£o e pot√™ncia.",
                    "type": "DRILL",
                    "category": "TECHNIQUE",
                    "difficulty": 3,
                    "equipment": ["Saco de pancadas", "Bandagens", "Luvas"],
                    "duration": 900,
                    "repetitions": 50,
                    "instructions": [
                        "Posicione-se em frente ao saco de pancadas",
                        "Execute 10 socos diretos com a m√£o direita",
                        "Execute 10 socos diretos com a m√£o esquerda",
                        "Execute 10 socos cruzados direita-esquerda",
                        "Descanse 30 segundos e repita a sequ√™ncia"
                    ],
                    "tips": [
                        "Mantenha o punho fechado corretamente",
                        "Gire o quadril para dar mais pot√™ncia",
                        "Mantenha o cotovelo pr√≥ximo ao corpo",
                        "Respire no momento do impacto"
                    ],
                    "safety": [
                        "Use bandagens para proteger os punhos",
                        "Calce luvas apropriadas",
                        "Verifique se o saco est√° bem fixado",
                        "Pare se sentir dor nas articula√ß√µes"
                    ]
                }
            ];

            const jsonString = JSON.stringify(sampleTechniques, null, 2);
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'exemplo-tecnicas-krav-maga.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            window.showToast('üì• Arquivo de exemplo baixado com sucesso!', 'success');
        }

        // Add CSS animation for toast
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
