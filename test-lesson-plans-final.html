<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Final - M√≥dulo Lesson Plans</title>
    <link rel="stylesheet" href="/css/design-system/index.css">
    <link rel="stylesheet" href="/css/modules/lesson-plans.css">
    <style>
        body {
            padding: 20px;
            font-family: 'Inter', sans-serif;
            background: var(--color-background);
            color: var(--color-text);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            background: var(--color-surface);
        }
        .test-result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-weight: 500;
        }
        .test-pass {
            background: var(--color-success-light);
            color: var(--color-success);
            border: 1px solid var(--color-success);
        }
        .test-fail {
            background: var(--color-error-light);
            color: var(--color-error);
            border: 1px solid var(--color-error);
        }
        .console-output {
            background: #1a1a1a;
            color: #00ff00;
            padding: 15px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 12px;
            overflow-x: auto;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <h1>üß™ Teste Final - M√≥dulo Lesson Plans</h1>
    
    <div class="test-section">
        <h2>üìö Classes CSS Premium (Guidelines2.md)</h2>
        <div class="module-header-premium">
            <h3>Header Premium com Gradiente</h3>
        </div>
        <div class="stat-card-enhanced">
            <h4>Stats Card Enhanced</h4>
            <p>Hover para ver efeito</p>
        </div>
        <div class="data-card-premium">
            <h4>Data Card Premium</h4>
            <p>Estilo padronizado</p>
        </div>
        <div id="css-test-result" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>üîß Sistema de Design</h2>
        <div style="display: flex; gap: 15px; margin: 15px 0;">
            <div style="width: 50px; height: 50px; background: var(--primary-color); border-radius: 4px;" title="Primary: #667eea"></div>
            <div style="width: 50px; height: 50px; background: var(--secondary-color); border-radius: 4px;" title="Secondary: #764ba2"></div>
            <div style="width: 100px; height: 50px; background: var(--gradient-primary); border-radius: 4px;" title="Gradient Primary"></div>
        </div>
        <div id="design-test-result" class="test-result"></div>
    </div>

    <div class="test-section">
        <h2>‚öôÔ∏è JavaScript Module Loading</h2>
        <div id="js-test-result" class="test-result"></div>
        <div id="console-log" class="console-output"></div>
    </div>

    <div class="test-section">
        <h2>üèóÔ∏è AcademyApp Integration</h2>
        <div id="app-test-result" class="test-result"></div>
    </div>

    <!-- Scripts em ordem espec√≠fica -->
    <script src="/js/shared/api-client.js"></script>
    <script src="/js/shared/state-manager.js"></script>
    <script src="/js/shared/spa-router.js"></script>
    <script src="/js/core/app.js"></script>
    <script src="/js/modules/lesson-plans/lesson-plans.js"></script>

    <script>
        // Capturar logs do console
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        let consoleOutput = '';

        function addToConsole(type, ...args) {
            const timestamp = new Date().toLocaleTimeString();
            consoleOutput += `[${timestamp}] ${type.toUpperCase()}: ${args.join(' ')}\n`;
            document.getElementById('console-log').textContent = consoleOutput;
        }

        console.log = (...args) => {
            originalLog(...args);
            addToConsole('log', ...args);
        };

        console.error = (...args) => {
            originalError(...args);
            addToConsole('error', ...args);
        };

        console.warn = (...args) => {
            originalWarn(...args);
            addToConsole('warn', ...args);
        };

        // Aguardar carregamento completo
        window.addEventListener('load', () => {
            setTimeout(runTests, 1000);
        });

        function runTests() {
            console.log('üß™ Iniciando testes do m√≥dulo Lesson Plans...');

            // Teste 1: Classes CSS Premium
            testCSSClasses();
            
            // Teste 2: Sistema de Design
            testDesignSystem();
            
            // Teste 3: JavaScript Module Loading
            testJavaScriptModule();
            
            // Teste 4: AcademyApp Integration
            testAcademyAppIntegration();
        }

        function testCSSClasses() {
            const tests = [
                { selector: '.module-header-premium', name: 'Module Header Premium' },
                { selector: '.stat-card-enhanced', name: 'Stat Card Enhanced' },
                { selector: '.data-card-premium', name: 'Data Card Premium' }
            ];

            let passed = 0;
            let total = tests.length;

            tests.forEach(test => {
                const element = document.querySelector(test.selector);
                if (element) {
                    const styles = window.getComputedStyle(element);
                    if (styles.background.includes('gradient') || styles.background.includes('var(')) {
                        passed++;
                        console.log(`‚úÖ ${test.name}: CSS aplicado corretamente`);
                    } else {
                        console.log(`‚ùå ${test.name}: CSS n√£o possui gradiente/vari√°veis`);
                    }
                } else {
                    console.log(`‚ùå ${test.name}: Elemento n√£o encontrado`);
                }
            });

            const result = document.getElementById('css-test-result');
            if (passed === total) {
                result.className = 'test-result test-pass';
                result.textContent = `‚úÖ Classes CSS Premium: ${passed}/${total} aprovadas`;
            } else {
                result.className = 'test-result test-fail';
                result.textContent = `‚ùå Classes CSS Premium: ${passed}/${total} aprovadas`;
            }
        }

        function testDesignSystem() {
            const root = document.documentElement;
            const primary = getComputedStyle(root).getPropertyValue('--primary-color').trim();
            const secondary = getComputedStyle(root).getPropertyValue('--secondary-color').trim();
            const gradient = getComputedStyle(root).getPropertyValue('--gradient-primary').trim();

            console.log('üé® Design System Colors:');
            console.log(`Primary: ${primary}`);
            console.log(`Secondary: ${secondary}`);
            console.log(`Gradient: ${gradient}`);

            const result = document.getElementById('design-test-result');
            if (primary.includes('#667eea') && secondary.includes('#764ba2') && gradient.includes('linear-gradient')) {
                result.className = 'test-result test-pass';
                result.textContent = '‚úÖ Sistema de Design: Cores padronizadas (#667eea + #764ba2)';
            } else {
                result.className = 'test-result test-fail';
                result.textContent = '‚ùå Sistema de Design: Cores n√£o padronizadas';
            }
        }

        function testJavaScriptModule() {
            console.log('üì¶ Testando carregamento do m√≥dulo JavaScript...');
            
            let passed = 0;
            let total = 3;

            // Teste 1: M√≥dulo existe globalmente
            if (typeof window.lessonPlansModule !== 'undefined') {
                console.log('‚úÖ window.lessonPlansModule existe');
                passed++;
            } else {
                console.log('‚ùå window.lessonPlansModule n√£o encontrado');
            }

            // Teste 2: Controllers existem
            if (window.lessonPlansModule && window.lessonPlansModule.controllers) {
                console.log('‚úÖ Controllers definidos');
                passed++;
            } else {
                console.log('‚ùå Controllers n√£o encontrados');
            }

            // Teste 3: Sem erros de bind
            try {
                if (window.lessonPlansModule && window.lessonPlansModule.init) {
                    console.log('‚úÖ M√©todo init dispon√≠vel');
                    passed++;
                } else {
                    console.log('‚ùå M√©todo init n√£o encontrado');
                }
            } catch (error) {
                console.log(`‚ùå Erro ao verificar init: ${error.message}`);
            }

            const result = document.getElementById('js-test-result');
            if (passed === total) {
                result.className = 'test-result test-pass';
                result.textContent = `‚úÖ M√≥dulo JavaScript: ${passed}/${total} testes aprovados`;
            } else {
                result.className = 'test-result test-fail';
                result.textContent = `‚ùå M√≥dulo JavaScript: ${passed}/${total} testes aprovados`;
            }
        }

        function testAcademyAppIntegration() {
            console.log('üèóÔ∏è Testando integra√ß√£o com AcademyApp...');
            
            let passed = 0;
            let total = 2;

            // Teste 1: AcademyApp existe
            if (typeof window.app !== 'undefined') {
                console.log('‚úÖ window.app (AcademyApp) existe');
                passed++;
            } else {
                console.log('‚ùå window.app n√£o encontrado');
            }

            // Teste 2: M√≥dulo registrado no app
            if (window.app && window.app.modules && window.app.modules['lesson-plans']) {
                console.log('‚úÖ M√≥dulo lesson-plans registrado no AcademyApp');
                passed++;
            } else {
                console.log('‚ùå M√≥dulo lesson-plans n√£o registrado');
            }

            const result = document.getElementById('app-test-result');
            if (passed === total) {
                result.className = 'test-result test-pass';
                result.textContent = `‚úÖ AcademyApp Integration: ${passed}/${total} testes aprovados`;
            } else {
                result.className = 'test-result test-fail';
                result.textContent = `‚ùå AcademyApp Integration: ${passed}/${total} testes aprovados`;
            }
        }
    </script>
</body>
</html>
