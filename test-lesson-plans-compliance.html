<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Lesson Plans Compliance Guidelines2.md</title>
    <style>
        body { 
            font-family: -apple-system, BlinkMacSystemFont, system-ui, sans-serif; 
            margin: 0; 
            padding: 20px; 
            background: #f8fafc; 
        }
        .test-container { 
            max-width: 1200px; 
            margin: 0 auto; 
            background: white; 
            border-radius: 12px; 
            padding: 20px; 
            box-shadow: 0 4px 6px rgba(0,0,0,0.1); 
        }
        .test-header { 
            text-align: center; 
            margin-bottom: 30px; 
            border-bottom: 2px solid #667eea; 
            padding-bottom: 20px; 
        }
        .checklist { 
            display: grid; 
            gap: 15px; 
        }
        .check-item { 
            display: flex; 
            align-items: center; 
            padding: 12px; 
            border-radius: 8px; 
            border: 1px solid #e2e8f0; 
        }
        .check-item.pass { 
            background: #f0fdf4; 
            border-color: #10b981; 
        }
        .check-item.fail { 
            background: #fef2f2; 
            border-color: #ef4444; 
        }
        .check-icon { 
            margin-right: 12px; 
            font-size: 18px; 
        }
        .test-btn { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            color: white; 
            border: none; 
            padding: 12px 24px; 
            border-radius: 8px; 
            cursor: pointer; 
            font-weight: 600; 
            margin-right: 10px; 
        }
        #lessonPlansContainer { 
            margin-top: 30px; 
            border: 2px dashed #667eea; 
            border-radius: 12px; 
            min-height: 400px; 
        }
    </style>
    
    <!-- Design System -->
    <link rel="stylesheet" href="public/css/design-system/tokens.css">
    <link rel="stylesheet" href="public/css/modules/lesson-plans.css">
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üîç Auditoria Lesson Plans - Guidelines2.md</h1>
            <p>Verifica√ß√£o de conformidade com padr√µes premium</p>
            <button class="test-btn" onclick="runCompliance()">‚ñ∂Ô∏è Executar Auditoria</button>
            <button class="test-btn" onclick="testModule()">üß™ Testar M√≥dulo</button>
        </div>

        <div id="auditResults" class="checklist">
            <!-- Resultados ser√£o inseridos aqui -->
        </div>

        <div id="lessonPlansContainer" class="module-isolated-container" data-module="lesson-plans">
            <!-- M√≥dulo ser√° carregado aqui -->
        </div>
    </div>

    <!-- Scripts do sistema -->
    <script src="public/js/shared/utils/feedback.js"></script>
    <script src="public/js/shared/api-client.js"></script>
    <script type="module" src="public/js/modules/lesson-plans/lesson-plans.js"></script>

    <script>
        // Auditoria de conformidade
        function runCompliance() {
            console.log('üîç Executando auditoria Guidelines2.md...');
            
            const checks = [
                {
                    name: 'M√≥dulo registrado no AcademyApp',
                    test: () => window.lessonPlansModule && window.lessonPlansModule.name === 'lesson-plans'
                },
                {
                    name: 'Design System CSS importado',
                    test: () => document.querySelector('link[href*="tokens.css"]') !== null
                },
                {
                    name: 'Classes premium dispon√≠veis (.module-header-premium)',
                    test: () => {
                        const style = getComputedStyle(document.documentElement);
                        return style.getPropertyValue('--primary-color').includes('#667eea');
                    }
                },
                {
                    name: 'Container com data-module correto',
                    test: () => {
                        const container = document.querySelector('[data-module="lesson-plans"]');
                        return container !== null;
                    }
                },
                {
                    name: 'API client integration',
                    test: () => typeof window.createModuleAPI === 'function'
                },
                {
                    name: 'Fun√ß√µes de inicializa√ß√£o expostas',
                    test: () => typeof window.initLessonPlans === 'function'
                },
                {
                    name: 'Estrutura MVC (Controllers)',
                    test: () => window.LessonPlansListController && window.LessonPlanEditorController
                },
                {
                    name: 'Error handling via AcademyApp',
                    test: () => window.lessonPlansModule && typeof window.lessonPlansModule.destroy === 'function'
                }
            ];

            const resultsContainer = document.getElementById('auditResults');
            resultsContainer.innerHTML = '';

            let passCount = 0;
            
            checks.forEach(check => {
                const passed = check.test();
                if (passed) passCount++;
                
                const item = document.createElement('div');
                item.className = `check-item ${passed ? 'pass' : 'fail'}`;
                item.innerHTML = `
                    <span class="check-icon">${passed ? '‚úÖ' : '‚ùå'}</span>
                    <span>${check.name}</span>
                `;
                resultsContainer.appendChild(item);
            });

            // Score final
            const score = Math.round((passCount / checks.length) * 100);
            const scoreItem = document.createElement('div');
            scoreItem.className = `check-item ${score >= 80 ? 'pass' : 'fail'}`;
            scoreItem.innerHTML = `
                <span class="check-icon">üìä</span>
                <strong>Score de Conformidade: ${score}% (${passCount}/${checks.length})</strong>
            `;
            resultsContainer.appendChild(scoreItem);

            console.log(`üìä Auditoria conclu√≠da: ${score}% de conformidade`);
        }

        // Teste do m√≥dulo
        async function testModule() {
            console.log('üß™ Testando m√≥dulo lesson plans...');
            
            try {
                if (typeof window.initLessonPlans === 'function') {
                    await window.initLessonPlans();
                    console.log('‚úÖ M√≥dulo inicializado com sucesso');
                } else {
                    console.error('‚ùå Fun√ß√£o initLessonPlans n√£o encontrada');
                }
            } catch (error) {
                console.error('‚ùå Erro ao testar m√≥dulo:', error);
            }
        }

        // Auto-run ao carregar
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(runCompliance, 1000);
        });
    </script>
</body>
</html>
