<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Sistema de Abas do Editor de Estudante</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="public/css/modules/student-editor.css">
    <style>
        body {
            margin: 0;
            background: #0F172A;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
        }
        
        .test-header {
            background: rgba(15, 23, 42, 0.8);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid #334155;
            text-align: center;
        }
        
        .test-header h1 {
            color: #F8FAFC;
            margin: 0 0 1rem 0;
        }
        
        .test-controls {
            margin: 2rem 0;
            text-align: center;
        }
        
        .test-btn {
            background: #3B82F6;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            margin: 0 0.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .test-btn:hover {
            background: #2563EB;
            transform: translateY(-2px);
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }
        
        .status-success { background: #10B981; }
        .status-error { background: #EF4444; }
        .status-warning { background: #F59E0B; }
    </style>
</head>
<body>
    <div class="test-container students-isolated">
        <div class="test-header">
            <h1><i class="fas fa-vial"></i> Teste do Sistema de Abas - Editor de Estudante</h1>
            <p style="color: #94A3B8; margin: 0;">Verificando se as abas trocam sem sobreposi√ß√£o</p>
        </div>
        
        <div class="test-controls">
            <button class="test-btn" onclick="testAutoSwitch()">
                <i class="fas fa-play"></i> Teste Autom√°tico
            </button>
            <button class="test-btn" onclick="testManualSwitch('profile')">
                üë§ Perfil
            </button>
            <button class="test-btn" onclick="testManualSwitch('financial')">
                üí≥ Financeiro
            </button>
            <button class="test-btn" onclick="testManualSwitch('enrollments')">
                üéì Matr√≠culas
            </button>
            <button class="test-btn" onclick="testManualSwitch('classes')">
                üè´ Turmas
            </button>
            <button class="test-btn" onclick="testManualSwitch('progress')">
                üìä Progresso
            </button>
            <button class="test-btn" onclick="testManualSwitch('insights')">
                üí° Insights
            </button>
        </div>

        <!-- Tab System Test Area -->
        <div class="tab-container">
            <div class="tab-navigation">
                <button class="page-tab active" data-tab="profile">
                    üë§ Perfil
                </button>
                <button class="page-tab" data-tab="financial">
                    üí≥ Financeiro
                </button>
                <button class="page-tab" data-tab="enrollments">
                    üéì Matr√≠culas
                </button>
                <button class="page-tab" data-tab="classes">
                    üè´ Turmas
                </button>
                <button class="page-tab" data-tab="progress">
                    üìä Progresso
                </button>
                <button class="page-tab" data-tab="insights">
                    üí° Insights
                </button>
            </div>
        </div>

        <!-- Critical: Tab Content Container with Proper Isolation -->
        <div class="tab-content-container">
            <!-- Profile Tab Content -->
            <div id="profile-content" class="tab-content active">
                <div class="form-section">
                    <h4><i class="fas fa-user"></i> Informa√ß√µes do Perfil</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
                        <div class="form-group">
                            <label style="color: #94A3B8;">Nome Completo</label>
                            <input type="text" value="Jo√£o Silva" style="width: 100%; padding: 0.75rem; border: 1px solid #334155; border-radius: 8px; background: rgba(15, 23, 42, 0.8); color: #F8FAFC;">
                        </div>
                        <div class="form-group">
                            <label style="color: #94A3B8;">Email</label>
                            <input type="email" value="joao@email.com" style="width: 100%; padding: 0.75rem; border: 1px solid #334155; border-radius: 8px; background: rgba(15, 23, 42, 0.8); color: #F8FAFC;">
                        </div>
                        <div class="form-group">
                            <label style="color: #94A3B8;">Telefone</label>
                            <input type="tel" value="(11) 99999-9999" style="width: 100%; padding: 0.75rem; border: 1px solid #334155; border-radius: 8px; background: rgba(15, 23, 42, 0.8); color: #F8FAFC;">
                        </div>
                        <div class="form-group">
                            <label style="color: #94A3B8;">Categoria</label>
                            <select style="width: 100%; padding: 0.75rem; border: 1px solid #334155; border-radius: 8px; background: rgba(15, 23, 42, 0.8); color: #F8FAFC;">
                                <option>Adulto</option>
                                <option>Crian√ßa</option>
                                <option>Idoso</option>
                            </select>
                        </div>
                    </div>
                    <div id="profile-status" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; color: #10B981;">
                        <span class="status-indicator status-success"></span>
                        Aba do Perfil carregada e vis√≠vel
                    </div>
                </div>
            </div>
            
            <!-- Financial Tab Content -->
            <div id="financial-content" class="tab-content">
                <div class="form-section">
                    <h4><i class="fas fa-credit-card"></i> Informa√ß√µes Financeiras</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem;">
                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155;">
                            <h5 style="color: #F8FAFC; margin: 0 0 1rem 0;">Assinatura Atual</h5>
                            <p style="color: #10B981; font-size: 1.5rem; font-weight: bold; margin: 0;">R$ 149,90/m√™s</p>
                            <p style="color: #94A3B8; margin: 0.5rem 0 0 0;">Plano Premium - Ativo</p>
                        </div>
                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155;">
                            <h5 style="color: #F8FAFC; margin: 0 0 1rem 0;">Matr√≠cula</h5>
                            <p style="color: #3B82F6; font-size: 1.2rem; font-weight: bold; margin: 0;">Krav Maga</p>
                            <p style="color: #94A3B8; margin: 0.5rem 0 0 0;">Desde: Janeiro 2025</p>
                        </div>
                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155;">
                            <h5 style="color: #F8FAFC; margin: 0 0 1rem 0;">Pr√≥ximo Pagamento</h5>
                            <p style="color: #F59E0B; font-size: 1.2rem; font-weight: bold; margin: 0;">15/08/2025</p>
                            <p style="color: #94A3B8; margin: 0.5rem 0 0 0;">Em 10 dias</p>
                        </div>
                    </div>
                    <div id="financial-status" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; color: #10B981;">
                        <span class="status-indicator status-success"></span>
                        Aba Financeira carregada com dados de matr√≠cula e curso
                    </div>
                </div>
            </div>
            
            <!-- Enrollments Tab Content -->
            <div id="enrollments-content" class="tab-content">
                <div class="form-section">
                    <h4><i class="fas fa-graduation-cap"></i> Matr√≠culas</h4>
                    <div style="display: grid; gap: 1rem;">
                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h5 style="color: #F8FAFC; margin: 0;">Krav Maga - Faixa Branca</h5>
                                    <p style="color: #94A3B8; margin: 0.5rem 0 0 0;">Defesa Pessoal 1 (Adultos)</p>
                                </div>
                                <span style="background: #10B981; color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.8rem;">ATIVO</span>
                            </div>
                            <div style="margin-top: 1rem;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                    <span style="color: #94A3B8;">Progresso</span>
                                    <span style="color: #10B981; font-weight: bold;">75%</span>
                                </div>
                                <div style="background: rgba(55, 65, 81, 0.5); height: 8px; border-radius: 4px; overflow: hidden;">
                                    <div style="background: #10B981; height: 100%; width: 75%; transition: width 0.3s ease;"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="enrollments-status" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; color: #10B981;">
                        <span class="status-indicator status-success"></span>
                        Aba de Matr√≠culas carregada
                    </div>
                </div>
            </div>
            
            <!-- Classes Tab Content -->
            <div id="classes-content" class="tab-content">
                <div class="form-section">
                    <h4><i class="fas fa-users"></i> Turmas</h4>
                    <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155;">
                        <h5 style="color: #F8FAFC; margin: 0 0 1rem 0;">Turma Segunda/Quarta - 19:00</h5>
                        <p style="color: #94A3B8;">Instrutor: Carlos Silva</p>
                        <p style="color: #94A3B8;">Local: Academia Central</p>
                        <p style="color: #10B981;">Pr√≥xima aula: Segunda, 7 de Agosto</p>
                    </div>
                    <div id="classes-status" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; color: #10B981;">
                        <span class="status-indicator status-success"></span>
                        Aba de Turmas carregada
                    </div>
                </div>
            </div>
            
            <!-- Progress Tab Content -->
            <div id="progress-content" class="tab-content">
                <div class="form-section">
                    <h4><i class="fas fa-chart-line"></i> Progresso</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155; text-align: center;">
                            <p style="color: #94A3B8; margin: 0; font-size: 0.9rem;">Aulas Frequentadas</p>
                            <p style="color: #10B981; font-size: 2rem; font-weight: bold; margin: 0.5rem 0;">32</p>
                        </div>
                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155; text-align: center;">
                            <p style="color: #94A3B8; margin: 0; font-size: 0.9rem;">Taxa de Presen√ßa</p>
                            <p style="color: #3B82F6; font-size: 2rem; font-weight: bold; margin: 0.5rem 0;">85%</p>
                        </div>
                        <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155; text-align: center;">
                            <p style="color: #94A3B8; margin: 0; font-size: 0.9rem;">N√≠vel Atual</p>
                            <p style="color: #F59E0B; font-size: 1.5rem; font-weight: bold; margin: 0.5rem 0;">Faixa Branca</p>
                        </div>
                    </div>
                    <div id="progress-status" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; color: #10B981;">
                        <span class="status-indicator status-success"></span>
                        Aba de Progresso carregada
                    </div>
                </div>
            </div>
            
            <!-- Insights Tab Content -->
            <div id="insights-content" class="tab-content">
                <div class="form-section">
                    <h4><i class="fas fa-lightbulb"></i> Insights</h4>
                    <div style="background: rgba(15, 23, 42, 0.8); padding: 1.5rem; border-radius: 12px; border: 1px solid #334155;">
                        <h5 style="color: #F8FAFC; margin: 0 0 1rem 0;">Recomenda√ß√µes</h5>
                        <ul style="color: #CBD5E1; margin: 0; padding-left: 1.5rem;">
                            <li style="margin-bottom: 0.5rem;">Excelente frequ√™ncia! Continue assim.</li>
                            <li style="margin-bottom: 0.5rem;">Considere treinar defesas contra agarramentos.</li>
                            <li style="margin-bottom: 0.5rem;">Pr√≥xima gradua√ß√£o estimada: Dezembro 2025</li>
                        </ul>
                    </div>
                    <div id="insights-status" style="margin-top: 1rem; padding: 1rem; background: rgba(16, 185, 129, 0.1); border-radius: 8px; color: #10B981;">
                        <span class="status-indicator status-success"></span>
                        Aba de Insights carregada
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Test Results -->
        <div id="test-results" style="margin-top: 2rem; padding: 1.5rem; background: rgba(15, 23, 42, 0.8); border-radius: 12px; border: 1px solid #334155;">
            <h4 style="color: #F8FAFC; margin: 0 0 1rem 0;">
                <i class="fas fa-clipboard-check"></i> Resultados do Teste
            </h4>
            <div id="test-log" style="color: #CBD5E1; font-family: monospace; font-size: 0.9rem;">
                <p>üîß Sistema de abas inicializado</p>
                <p>‚úÖ CSS com isolamento carregado</p>
                <p>‚úÖ Container .tab-content-container detectado</p>
                <p>‚úÖ 6 abas dispon√≠veis para teste</p>
                <p>üëÜ Clique nas abas acima ou use os bot√µes de teste</p>
            </div>
        </div>
    </div>

    <script>
        // Simplified tab switching for testing
        function switchTab(tabName) {
            console.log(`üîÑ Switching to tab: ${tabName}`);
            
            // Remove active class from all tabs and content
            document.querySelectorAll('.page-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to target tab and content
            const targetTab = document.querySelector(`[data-tab="${tabName}"]`);
            const targetContent = document.getElementById(`${tabName}-content`);
            
            if (targetTab && targetContent) {
                targetTab.classList.add('active');
                targetContent.classList.add('active');
                
                // Log success
                addTestLog(`‚úÖ Switched to ${tabName} tab - No overlapping detected`);
                
                // Update status indicators
                updateStatusIndicators(tabName);
                
                return true;
            } else {
                addTestLog(`‚ùå Failed to switch to ${tabName} tab`);
                return false;
            }
        }
        
        function testManualSwitch(tabName) {
            addTestLog(`üß™ Manual test: switching to ${tabName}`);
            switchTab(tabName);
        }
        
        function testAutoSwitch() {
            addTestLog('ü§ñ Starting automatic tab switching test...');
            
            const tabs = ['profile', 'financial', 'enrollments', 'classes', 'progress', 'insights'];
            let currentIndex = 0;
            
            const interval = setInterval(() => {
                if (currentIndex >= tabs.length) {
                    clearInterval(interval);
                    addTestLog('üéâ Automatic test completed successfully!');
                    addTestLog('‚úÖ All tabs switch without overlapping');
                    return;
                }
                
                const tabName = tabs[currentIndex];
                addTestLog(`üîÑ Auto-switching to: ${tabName}`);
                switchTab(tabName);
                currentIndex++;
            }, 1500);
        }
        
        function addTestLog(message) {
            const log = document.getElementById('test-log');
            const p = document.createElement('p');
            p.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(p);
            log.scrollTop = log.scrollHeight;
        }
        
        function updateStatusIndicators(activeTab) {
            // Update all status indicators to show which tab is active
            document.querySelectorAll('[id$="-status"]').forEach(status => {
                const tabName = status.id.replace('-status', '');
                const indicator = status.querySelector('.status-indicator');
                
                if (tabName === activeTab) {
                    indicator.className = 'status-indicator status-success';
                    status.style.background = 'rgba(16, 185, 129, 0.1)';
                    status.style.color = '#10B981';
                } else {
                    indicator.className = 'status-indicator status-warning';
                    status.style.background = 'rgba(75, 85, 99, 0.1)';
                    status.style.color = '#9CA3AF';
                }
            });
        }
        
        // Initialize tab system
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîß Initializing tab test system...');
            
            // Setup tab click listeners
            document.querySelectorAll('.page-tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tabName = tab.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
            
            // Set initial tab
            switchTab('profile');
            
            addTestLog('üöÄ Tab system initialized and ready for testing');
            
            // Check CSS isolation
            const container = document.querySelector('.tab-content-container');
            if (container) {
                const styles = getComputedStyle(container);
                if (styles.position === 'relative') {
                    addTestLog('‚úÖ Container positioning: relative (correct)');
                } else {
                    addTestLog('‚ùå Container positioning issue detected');
                }
            }
            
            const tabContents = document.querySelectorAll('.tab-content');
            let correctPositioning = 0;
            tabContents.forEach(content => {
                const styles = getComputedStyle(content);
                if (styles.position === 'absolute') {
                    correctPositioning++;
                }
            });
            
            if (correctPositioning === tabContents.length) {
                addTestLog(`‚úÖ All ${tabContents.length} tab contents have absolute positioning`);
            } else {
                addTestLog(`‚ùå Positioning issues: ${correctPositioning}/${tabContents.length} tabs correct`);
            }
        });
    </script>
</body>
</html>
