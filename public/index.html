<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academia Dashboard</title>
    <!-- FORÃ‡A RESET - Para garantir design minimalista -->
    <link rel="stylesheet" href="css/force-reset.css">
    <!-- LAYOUT CENTER FIX - CorreÃ§Ã£o de centralizaÃ§Ã£o -->
    <link rel="stylesheet" href="css/layout-center-fix.css">
    <!-- FORMULÃRIOS UX PROFISSIONAIS -->
    <link rel="stylesheet" href="css/forms-ux.css">
    <!-- Design System - Guidelines.MD Compliance -->
    <link rel="stylesheet" href="css/design-system/index.css">
    <link rel="stylesheet" href="css/dashboard/main.css">
    <!-- CorreÃ§Ã£o de emergÃªncia para o menu -->
    <link rel="stylesheet" href="css/menu-fix.css">
    <!-- Global Premium Colors - Academia v2.0 -->
    <link rel="stylesheet" href="css/global-premium-colors.css">
    <!-- Module CSS -->
    <link rel="stylesheet" href="css/modules/courses.css">
    <link rel="stylesheet" href="css/modules/courses-premium.css">
    <link rel="stylesheet" href="css/modules/course-editor-premium.css">
    <link rel="stylesheet" href="css/modules/turmas.css">
    <link rel="stylesheet" href="css/modules/turmas-clean.css">
    <link rel="stylesheet" href="css/modules/turmas-courses.css">
    <link rel="stylesheet" href="css/modules/turmas-tabs.css">
    <link rel="stylesheet" href="css/modules/frequency-basic.css">
    <link rel="stylesheet" href="css/modules/frequency-dashboard.css">
    <link rel="stylesheet" href="css/modules/frequency-history.css">
    <link rel="stylesheet" href="css/modules/lesson-execution.css">
    <link rel="stylesheet" href="css/modules/import.css">
    <link rel="stylesheet" href="css/modules/import-enhanced.css">
    <link rel="stylesheet" href="css/modules/agenda.css">
    <link rel="stylesheet" href="css/modules/units.css">
    <link rel="stylesheet" href="css/modules/students-premium.css">
    <link rel="stylesheet" href="css/modules/student-progress.css">
    <link rel="stylesheet" href="css/modules/graduation.css">
    <link rel="stylesheet" href="css/modules/crm.css">
    <link rel="stylesheet" href="css/modules/checkin-kiosk.css">
    <link rel="stylesheet" href="css/modules/ai.css">
    <link rel="stylesheet" href="css/modules/agents.css">
    <link rel="stylesheet" href="css/modules/agent-dashboard-widget.css">
    <link rel="stylesheet" href="css/modules/agent-chat.css">
    <link rel="stylesheet" href="css/modules/agent-chat-widget.css">
    <link rel="stylesheet" href="css/modules/agent-chat-fullscreen.css">
    <link rel="stylesheet" href="css/modules/task-approval-widget.css">
    <link rel="stylesheet" href="css/modules/agent-activity.css">
</head>
<body>
    <!-- Barra Superior Minimalista -->
    <header class="top-bar">
        <div class="menu-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="logo">Academia</div>
        <div class="search-bar">
            <input type="text" placeholder="Buscar alunos, planos...">
        </div>
        <div class="user-actions">
            <div class="notifications" title="NotificaÃ§Ãµes">ğŸ””</div>
            <div class="user-profile" title="Perfil">ğŸ‘¤</div>
            <button id="logoutBtn" class="logout-btn" title="Sair">ğŸšª Sair</button>
        </div>
    </header>

    <!-- Menu Lateral Limpo -->
    <aside class="sidebar">
        <nav class="main-menu">
            <ul>
                <li class="active" data-module="dashboard">
                    <i>ğŸ“Š</i> <span>Dashboard</span>
                </li>
                <li data-module="students">
                    <i>ğŸ‘¥</i> <span>Alunos</span>
                </li>
                <li data-module="crm">
                    <i>ğŸ¯</i> <span>CRM & Leads</span>
                </li>
                <li data-module="packages">
                    <i>ğŸ·ï¸</i> <span>Comercial</span>
                </li>
                <li data-module="activities">
                    <i>ğŸƒ</i> <span>Atividades</span>
                </li>
                <li data-module="lesson-plans">
                    <i>ğŸ“š</i> <span>Planos de Aula</span>
                </li>
                <li data-module="courses">
                    <i>ğŸ“</i> <span>Cursos</span>
                </li>
                <li data-module="turmas">
                    <i>ğŸ‘¥</i> <span>Turmas</span>
                </li>
                <li data-module="organizations">
                    <i>ğŸ«</i> <span>OrganizaÃ§Ãµes</span>
                </li>
                <li data-module="units">
                    <i>ğŸ¢</i> <span>Unidades</span>
                </li>
                <li data-module="instructors">
                    <i>ğŸ‘¨â€ğŸ«</i> <span>Instrutores</span>
                </li>
                <li data-module="checkin-kiosk">
                    <i>âœ…</i> <span>Check-in Kiosk</span>
                </li>
                <li data-module="agenda">
                    <i>ğŸ“…</i> <span>Agenda</span>
                </li>
                <li data-module="frequency">
                    <i>ğŸ“Š</i> <span>FrequÃªncia</span>
                </li>
                <li data-module="student-progress">
                    <i>ğŸ“ˆ</i> <span>Progresso</span>
                </li>
                <li data-module="graduation">
                    <i>ğŸ“</i> <span>GraduaÃ§Ã£o</span>
                </li>
                <li data-module="crm">
                    <i>ğŸ¯</i> <span>CRM</span>
                </li>
                <li data-module="ai">
                    <i>ğŸ¤–</i> <span>IA & Agentes</span>
                </li>
                <li data-module="agents">
                    <i>ğŸ¯</i> <span>Agentes</span>
                </li>
                <li data-module="agent-chat-fullscreen">
                    <i>ğŸ’¬</i> <span>Chat com Agentes</span>
                </li>
                <li data-module="agent-activity">
                    <i>ğŸ¤–</i> <span>Atividade de Agentes</span>
                </li>
                <li data-module="import">
                    <i>ğŸ“¥</i> <span>ImportaÃ§Ã£o</span>
                </li>
                <li data-module="reports">
                    <i>ğŸ“ˆ</i> <span>RelatÃ³rios</span>
                </li>
                <li data-module="settings">
                    <i>âš™ï¸</i> <span>ConfiguraÃ§Ãµes</span>
                </li>
            </ul>
        </nav>
    </aside>

    <!-- Ãrea de ConteÃºdo -->
    <main class="content-area">
        <div class="module-header">
            <h1>Dashboard</h1>
            <div class="breadcrumb">InÃ­cio</div>
        </div>

        <div class="module-content" id="module-container">
            <!-- ConteÃºdo dos mÃ³dulos serÃ¡ carregado aqui via SPA -->
            <div class="welcome-message">
                <h2>Dashboard Principal</h2>
                <p>Selecione um mÃ³dulo no menu lateral para comeÃ§ar.</p>
            </div>
        </div>
    </main>

    <!-- Auth Container (sobrepÃµe tudo quando nÃ£o hÃ¡ session) -->
    <div id="auth-overlay" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:#1a1a2e;z-index:9999;overflow:auto">
      <div id="auth-container"></div>
    </div>

    <!-- Chart.js for Dashboard Visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- Load core app utilities FIRST (organization context) -->
    <script src="js/core/app.js"></script>
    
    <!-- Load shared utilities before SPA router (non-module, globals on window) -->
    <script src="js/shared/utils/feedback.js"></script>
    <script src="js/shared/api-client.js"></script>
    <script src="js/shared/websocket-client.js"></script>
    <!-- Design Tokens (theme/branding) runtime applier -->
    <script src="js/shared/design-tokens.js"></script>

    <!-- SPA Router and UI Controller -->
    <script src="js/dashboard/spa-router.js"></script>
    <script src="js/dashboard/ui-controller.js"></script>
    
    <!-- Agent Chat Module -->
    <script src="js/modules/agent-chat/index.js"></script>
    <script src="js/modules/dashboard/agent-chat-widget.js"></script>

    <!-- Agent Chat Fullscreen Module -->
    <script type="module" src="js/modules/agent-chat-fullscreen/index.js"></script>

    <!-- AI Module -->
    <script type="module" src="js/modules/ai/index.js"></script>
    
    <!-- Agents Module -->
    <script type="module" src="js/modules/agents/index.js"></script>
    <script type="module" src="js/modules/agents/dashboard-widget.js"></script>

    <!-- Agent Activity Module -->
    <script type="module" src="js/modules/agent-activity/index.js"></script>

    <!-- Students Module -->
    <script type="module" src="js/modules/students/index.js"></script>

    <!-- Turmas Module -->
    <script type="module" src="js/modules/turmas/index.js"></script>

    <!-- Frequency Module -->
    <script type="module" src="js/modules/frequency/index.js"></script>

    <!-- Lesson Execution Module (Activity Tracking) -->
    <script type="module" src="js/modules/lesson-execution/index.js"></script>

    <!-- Import Module -->
    <script src="js/modules/import/controllers/importControllerEnhanced.js"></script>
    <script type="module" src="js/modules/import/index.js"></script>

    <!-- CRM Module -->
    <script type="module" src="js/modules/crm/index.js"></script>

    <!-- Packages Module (Comercial) -->
    <script type="module" src="js/modules/packages/index.js"></script>

    <!-- Dashboard Widgets -->
    <script src="js/modules/dashboard/widgets/task-approval-widget.js"></script>

    <!-- Test Guide for Anti-Duplication System - REMOVED: file does not exist -->
    <!-- <script type="module" src="js/modules/students/services/test-guide.js"></script> -->

    <!-- Lesson Plans Module - REMOVIDO: serÃ¡ carregado dinamicamente pelo router -->

    <!-- Logout Handler -->
    <script>
        // Configurar logout quando o DOM estiver pronto
        document.addEventListener('DOMContentLoaded', () => {
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', async () => {
                    // Limpar dados de autenticaÃ§Ã£o
                    localStorage.removeItem('token');
                    localStorage.removeItem('user');
                    localStorage.removeItem('activeOrganizationId');
                    sessionStorage.clear();
                    
                    // Redirecionar para pÃ¡gina de login
                    window.location.href = '/login.html';
                });
            }
        });
    </script>
</body>
</html>