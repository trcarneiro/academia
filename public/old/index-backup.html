<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü•ã Krav Maga Academy - Dashboard</title>
    
    <!-- ===== CORE STYLES ===== -->
    <link rel="stylesheet" href="/css/core/reset.css">
    <link rel="stylesheet" href="/css/core/variables.css">
    <link rel="stylesheet" href="/css/core/layout.css">
    <link rel="stylesheet" href="/css/core/components.css">
    <link rel="stylesheet" href="/css/core/dashboard.css">
    
    <!-- ===== MODULE STYLES ===== -->
    <link rel="stylesheet" href="/css/modules/students.css">
    <link rel="stylesheet" href="/css/modules/classes.css">
    <link rel="stylesheet" href="/css/modules/financial.css">
    <link rel="stylesheet" href="/css/modules/attendance.css">
    
    <!-- ===== MODULE LOADER ===== -->
    <script type="module">
        // Module Loader - Inline for performance
        window.ModuleLoader = {
            loadedModules: new Map(),
            
            async loadModule(moduleName) {
                if (this.loadedModules.has(moduleName)) {
                    return this.loadedModules.get(moduleName);
                }
                
                try {
                    const module = await import(`/js/modules/${moduleName}.js`);
                    this.loadedModules.set(moduleName, module);
                    return module;
                } catch (error) {
                    console.error(`‚ùå Failed to load module: ${moduleName}`, error);
                    return null;
                }
            },
            
            isModuleLoaded(moduleName) {
                return this.loadedModules.has(moduleName);
            }
        };
    </script>
</head>
<body>
    <!-- ===== MAIN DASHBOARD CONTAINER ===== -->
    <div class="dashboard-container" id="dashboardContainer">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <div class="header-title">
                    <span class="header-icon">ü•ã</span>
                    <span class="header-text">Krav Academy</span>
                </div>
                <div class="header-status">
                    <span class="status-icon">ü§ñ</span>
                    <span class="status-text">Sistema Ativo</span>
                </div>
            </div>
            <div class="header-actions">
                <button class="header-btn" onclick="app.navigation.toggleSidebar()">
                    <span class="btn-icon">‚ò∞</span>
                    <span class="btn-text">Menu</span>
                </button>
            </div>
        </header>

        <!-- Sidebar Navigation -->
        <aside class="dashboard-sidebar" id="dashboardSidebar">
            <!-- Gest√£o Principal -->
            <div class="sidebar-section">
                <div class="sidebar-title">Gest√£o Principal</div>
                <nav class="sidebar-nav">
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <button class="nav-link active" data-page="dashboard">
                                <span class="nav-icon">üìä</span>
                                <span class="nav-text">Dashboard</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-page="students">
                                <span class="nav-icon">üë•</span>
                                <span class="nav-text">Alunos</span>
                                <span class="nav-badge success">API</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-page="classes">
                                <span class="nav-icon">üè´</span>
                                <span class="nav-text">Turmas</span>
                                <span class="nav-badge success">API</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-page="attendance">
                                <span class="nav-icon">üìã</span>
                                <span class="nav-text">Presen√ßa</span>
                                <span class="nav-badge warning">DB</span>
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Financeiro -->
            <div class="sidebar-section">
                <div class="sidebar-title">Financeiro</div>
                <nav class="sidebar-nav">
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <button class="nav-link" data-page="financial">
                                <span class="nav-icon">üí∞</span>
                                <span class="nav-text">Financeiro</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-page="subscriptions">
                                <span class="nav-icon">üí≥</span>
                                <span class="nav-text">Assinaturas</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-page="financial-responsibles">
                                <span class="nav-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                                <span class="nav-text">Respons√°veis</span>
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>

            <!-- Sistema -->
            <div class="sidebar-section">
                <div class="sidebar-title">Sistema</div>
                <nav class="sidebar-nav">
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <button class="nav-link" onclick="window.open('/checkpoint.html', '_blank')">
                                <span class="nav-icon">‚ö°</span>
                                <span class="nav-text">Check-in R√°pido</span>
                                <span class="nav-badge info">NOVO</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" onclick="window.open('/views/plans.html', '_blank')">
                                <span class="nav-icon">üìã</span>
                                <span class="nav-text">Planos</span>
                                <span class="nav-badge external">NOVA ABA</span>
                            </button>
                        </li>
                        <li class="nav-item">
                            <button class="nav-link" data-page="settings">
                                <span class="nav-icon">‚öôÔ∏è</span>
                                <span class="nav-text">Configura√ß√µes</span>
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content" id="mainContent">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <div class="page-header">
                    <h1 class="page-title">üìä Dashboard</h1>
                    <p class="page-subtitle">Vis√£o geral do sistema</p>
                </div>
                
                <div class="dashboard-metrics" id="dashboardMetrics">
                    <!-- Metrics will be loaded dynamically -->
                </div>
                
                <div class="dashboard-content" id="dashboardContent">
                    <!-- Content will be loaded dynamically -->
                </div>
            </section>

            <!-- Students Section -->
            <section id="students" class="content-section">
                <div class="page-header">
                    <h1 class="page-title">üë• Gest√£o de Alunos</h1>
                    <p class="page-subtitle">Cadastro e gerenciamento de alunos</p>
                </div>
                <div class="section-content" id="studentsContent">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando m√≥dulo de alunos...</div>
                    </div>
                </div>
            </section>

            <!-- Classes Section -->
            <section id="classes" class="content-section">
                <div class="page-header">
                    <h1 class="page-title">üè´ Gest√£o de Turmas</h1>
                    <p class="page-subtitle">Organiza√ß√£o de turmas e hor√°rios</p>
                </div>
                <div class="section-content" id="classesContent">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando m√≥dulo de turmas...</div>
                    </div>
                </div>
            </section>

            <!-- Attendance Section -->
            <section id="attendance" class="content-section">
                <div class="page-header">
                    <h1 class="page-title">üìã Controle de Presen√ßa</h1>
                    <p class="page-subtitle">Registro e acompanhamento de frequ√™ncia</p>
                </div>
                <div class="section-content" id="attendanceContent">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando m√≥dulo de presen√ßa...</div>
                    </div>
                </div>
            </section>

            <!-- Financial Section -->
            <section id="financial" class="content-section">
                <div class="page-header">
                    <h1 class="page-title">üí∞ Gest√£o Financeira</h1>
                    <p class="page-subtitle">Controle financeiro e pagamentos</p>
                </div>
                <div class="section-content" id="financialContent">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando m√≥dulo financeiro...</div>
                    </div>
                </div>
            </section>

            <!-- Subscriptions Section -->
            <section id="subscriptions" class="content-section">
                <div class="page-header">
                    <h1 class="page-title">üí≥ Gest√£o de Assinaturas</h1>
                    <p class="page-subtitle">Planos e assinaturas dos alunos</p>
                </div>
                <div class="section-content" id="subscriptionsContent">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando m√≥dulo de assinaturas...</div>
                    </div>
                </div>
            </section>

            <!-- Financial Responsibles Section -->
            <section id="financial-responsibles" class="content-section">
                <div class="page-header">
                    <h1 class="page-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Respons√°veis Financeiros</h1>
                    <p class="page-subtitle">Gest√£o de respons√°veis por pagamentos</p>
                </div>
                <div class="section-content" id="financialResponsiblesContent">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando m√≥dulo de respons√°veis...</div>
                    </div>
                </div>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <div class="page-header">
                    <h1 class="page-title">‚öôÔ∏è Configura√ß√µes</h1>
                    <p class="page-subtitle">Configura√ß√µes do sistema</p>
                </div>
                <div class="section-content" id="settingsContent">
                    <div class="loading-state">
                        <div class="loading-spinner"></div>
                        <div class="loading-text">Carregando configura√ß√µes...</div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ===== CORE JAVASCRIPT ===== -->
    <script type="module" src="/js/core/api-client-simple.js"></script>
    <script type="module" src="/js/core/navigation-simple.js"></script>
    <script type="module" src="/js/core/app-simple.js"></script>
    
    <!-- ===== APPLICATION INITIALIZATION ===== -->
    <script type="module">
        // Initialize application when DOM is ready
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('üöÄ Initializing Krav Academy Dashboard...');
            
            // Dynamic import for initialization
            try {
                const { app } = await import('/js/core/app-simple.js');
                await app.init();
                console.log('‚úÖ Application initialized successfully');
            } catch (error) {
                console.error('‚ùå Application initialization failed:', error);
            }
        });
    </script>
</body>
</html>