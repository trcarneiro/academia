<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor de Aluno - Academia Krav Maga</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/modules/students.css">
    <link rel="stylesheet" href="../css/modules/student-editor.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="students-isolated">
        <!-- Page Header with Student Info -->
        <div class="page-header">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                <div>
                    <h1 id="editPageStudentName" style="margin: 0; font-size: 2rem; background: linear-gradient(135deg, #3B82F6, #8B5CF6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
                        Carregando...
                    </h1>
                    <p id="editPageStudentId" style="margin: 0.5rem 0 0 0; color: #94A3B8;">ID: --</p>
                    <p id="editPageStudentCategory" style="margin: 0.25rem 0 0 0; color: #94A3B8;">Categoria: --</p>
                </div>
                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button id="back-to-list-btn" class="btn btn-secondary" style="padding: 0.75rem 1.5rem;">
                        <i class="fas fa-arrow-left"></i> Voltar
                    </button>
                    <button id="save-student-btn" class="btn btn-primary" style="background: linear-gradient(135deg, #059669, #10B981); padding: 0.75rem 1.5rem;">
                        <i class="fas fa-save"></i> Salvar Alterações
                    </button>
                </div>
            </div>
        </div>

        <!-- Tab Navigation -->
        <div class="tab-container">
            <div class="tab-navigation">
                <button class="page-tab active" data-tab="profile">
                    <i class="fas fa-user"></i> Perfil
                </button>
                <button class="page-tab" data-tab="financial">
                    <i class="fas fa-credit-card"></i> Financeiro
                </button>
                <button class="page-tab" data-tab="enrollments">
                    <i class="fas fa-graduation-cap"></i> Matrículas
                </button>
                <button class="page-tab" data-tab="classes">
                    <i class="fas fa-users"></i> Turmas
                </button>
                <button class="page-tab" data-tab="progress">
                    <i class="fas fa-chart-line"></i> Progresso
                </button>
                <button class="page-tab" data-tab="insights">
                    <i class="fas fa-lightbulb"></i> Insights
                </button>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="main-content">
            <!-- Left Column - Tab Content Container with Proper Isolation -->
            <div class="tab-content-container">
                <!-- Profile Tab Content -->
                <div id="profile-content" class="tab-content active">
                    <div class="loading-state" style="text-align: center; padding: 3rem; color: #CBD5E1;">
                        <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                        <p>Carregando perfil...</p>
                    </div>
                </div>
                
                <!-- Financial Tab Content -->
                <div id="financial-content" class="tab-content">
                    <div class="loading-state" style="text-align: center; padding: 3rem; color: #CBD5E1;">
                        <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                        <p>Carregando dados financeiros...</p>
                    </div>
                </div>
                
                <!-- Enrollments Tab Content -->
                <div id="enrollments-content" class="tab-content">
                    <div class="loading-state" style="text-align: center; padding: 3rem; color: #CBD5E1;">
                        <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                        <p>Carregando matrículas...</p>
                    </div>
                </div>
                
                <!-- Classes Tab Content -->
                <div id="classes-content" class="tab-content">
                    <div class="loading-state" style="text-align: center; padding: 3rem; color: #CBD5E1;">
                        <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                        <p>Carregando turmas...</p>
                    </div>
                </div>
                
                <!-- Progress Tab Content -->
                <div id="progress-content" class="tab-content">
                    <div class="loading-state" style="text-align: center; padding: 3rem; color: #CBD5E1;">
                        <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                        <p>Carregando progresso...</p>
                    </div>
                </div>
                
                <!-- Insights Tab Content -->
                <div id="insights-content" class="tab-content">
                    <div class="loading-state" style="text-align: center; padding: 3rem; color: #CBD5E1;">
                        <div class="loading-spinner" style="margin: 0 auto 1rem;"></div>
                        <p>Carregando insights...</p>
                    </div>
                </div>
            </div>

            <!-- Right Column - Sidebar -->
            <div id="editPageSidebar">
                <!-- Student Statistics -->
                <div class="sidebar-card">
                    <h4 style="color: #F8FAFC; margin: 0 0 1rem 0;">
                        <i class="fas fa-chart-bar"></i> Estatísticas
                    </h4>
                    <div class="stats-grid" style="display: grid; gap: 1rem;">
                        <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #CBD5E1;">Cursos Ativos:</span>
                            <span id="sidebarActiveCourses" style="color: #10B981; font-weight: bold;">--</span>
                        </div>
                        <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #CBD5E1;">Turmas:</span>
                            <span id="sidebarActiveClasses" style="color: #3B82F6; font-weight: bold;">--</span>
                        </div>
                        <div class="stat-item" style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="color: #CBD5E1;">Taxa Presença:</span>
                            <span id="sidebarAttendanceRate" style="color: #F59E0B; font-weight: bold;">--</span>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="sidebar-card">
                    <h4 style="color: #F8FAFC; margin: 0 0 1rem 0;">
                        <i class="fas fa-bolt"></i> Ações Rápidas
                    </h4>
                    <div class="actions-grid" style="display: grid; gap: 0.75rem;">
                        <button onclick="generateStudentQR()" class="btn btn-outline" style="width: 100%; padding: 0.75rem; justify-content: center; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-qrcode"></i> Gerar QR Code
                        </button>
                        <button onclick="exportStudentData()" class="btn btn-outline" style="width: 100%; padding: 0.75rem; justify-content: center; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-download"></i> Exportar Dados
                        </button>
                        <button onclick="sendNotification()" class="btn btn-outline" style="width: 100%; padding: 0.75rem; justify-content: center; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-envelope"></i> Enviar Notificação
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading State -->
    <div id="loadingState" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: flex; align-items: center; justify-content: center; z-index: 9999;">
        <div style="background: rgba(15, 23, 42, 0.9); padding: 2rem; border-radius: 12px; text-align: center; border: 1px solid #334155;">
            <div style="color: #3B82F6; font-size: 2rem; margin-bottom: 1rem;">
                <i class="fas fa-spinner fa-spin"></i>
            </div>
            <p style="color: #F8FAFC; margin: 0;">Carregando dados do aluno...</p>
        </div>
    </div>

    <!-- Include JavaScript Module -->
    <script src="../js/modules/student-editor.js"></script>
</body>
</html>
