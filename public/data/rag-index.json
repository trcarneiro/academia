{
  "modules": {},
  "documentation": {
    "agents copy": {
      "path": "H:\\projetos\\academia\\docs\\agents copy.md",
      "content": "# ğŸ¤– ORIENTAÃ‡Ã•ES PARA AGENTES IA - KRAV MAGA ACADEMY\n\n## ğŸ›¡ï¸ **PROTOCOLO DE DESENVOLVIMENTO SEGURO - OBRIGATÃ“RIO**\n\n### âš ï¸ **ATENÃ‡ÃƒO CRÃTICA - LEIA ANTES DE QUALQUER ALTERAÃ‡ÃƒO**\n\nEste sistema possui uma **arquitetura modular protegida** implementada em 05/07/2025. **NUNCA** altere o cÃ³digo diretamente sem seguir os protocolos de seguranÃ§a.\n\n## ğŸ“Š **ESTRATÃ‰GIA DE PERSISTÃŠNCIA DE DADOS - CRÃTICO**\n\n### **ğŸ¯ REGRA FUNDAMENTAL: API-FIRST SEMPRE**\n\n**NUNCA use localStorage como soluÃ§Ã£o primÃ¡ria permanente.** O armazenamento local deve ser usado APENAS como fallback temporÃ¡rio quando as APIs estÃ£o indisponÃ­veis.\n\n#### **âœ… ESTRATÃ‰GIA CORRETA - Ordem de Prioridade:**\n\n```javascript\n// 1. SEMPRE tente API primeiro\nasync function salvarDados(dados) {\n    try {\n        // Primeira tentativa: API principal\n        const response = await fetch('/api/endpoint-principal', {\n            method: 'POST',\n            body: JSON.stringify(dados)\n        });\n        \n        if (response.ok) {\n            ...",
      "lastUpdated": "2025-07-07T05:43:40.080Z"
    },
    "agents": {
      "path": "H:\\projetos\\academia\\docs\\agents.md",
      "content": "# System Architecture & Workflow v2.0\nDocument ID: agents.md\nLast Updated: 07/12/2025\nSystem Status: STABLE & PROTECTED\n\nThis document outlines the development workflow and architectural principles for this project. Its purpose is to ensure all development extends system capabilities while ensuring zero downtime and zero regressions. Adherence to these protocols is mandatory.\n\n## ğŸ—ï¸ Project Structure (Current Implementation)\nThis is the **official** directory structure that must be followed for all development:\n\n```\nacademia/\nâ”œâ”€â”€ public/                          # Frontend assets\nâ”‚   â”œâ”€â”€ index.html                   # Main dashboard (clean, minimal)\nâ”‚   â”œâ”€â”€ views/                       # Full-screen pages (following Pillar III)\nâ”‚   â”‚   â”œâ”€â”€ students.html            # âœ… Student management (COMPLETE)\nâ”‚   â”‚   â”œâ”€â”€ student-editor.html      # âœ… Student CRUD operations\nâ”‚   â”‚   â”œâ”€â”€ classes.html             # âœ… Class management\nâ”‚   â”‚   â”œâ”€â”€ class-editor.html        # âœ… Class CRUD operations\nâ”‚   ...",
      "lastUpdated": "2025-07-18T03:38:18.881Z"
    },
    "API_FIX_COMPLETED": {
      "path": "H:\\projetos\\academia\\docs\\API_FIX_COMPLETED.md",
      "content": "# ğŸ¯ API ENDPOINTS FIX COMPLETED - JULY 6, 2025\n\n## Missing Endpoints RESOLVED âœ…\n\n### 1. Critical Issues Fixed\n- **Problem**: Multiple API endpoints returning \"Not Found\" errors\n- **Missing Endpoints**: \n  - `/api/billing-plans` âœ… IMPLEMENTED \n  - `/api/techniques` âœ… IMPLEMENTED\n- **Schema Issue**: Fastify validation error âœ… RESOLVED\n- **Impact**: Diagnostic showing \"Not Found\" errors, frontend unable to load plans and techniques data\n- **Root Cause**: Missing route implementations + schema validation conflicts\n\n### 2. Solution Implemented\n- **Action**: Created proper route modules with full TypeScript integration\n- **Files Created**:\n  - `src/routes/billingPlans.ts` - Complete billing plans API âœ…\n  - `src/routes/techniques.ts` - Complete techniques API âœ…\n- **Schema Fix**: Simplified Fastify schemas to avoid validation conflicts âœ…\n- **Integration**: Added routes to main server with proper prefixes and Swagger documentation âœ…\n- **Result**: All diagnostic API tests now pass âœ…\n\n### 3. Sch...",
      "lastUpdated": "2025-07-06T03:31:07.843Z"
    },
    "API_INTEGRATION_DOCUMENTATION": {
      "path": "H:\\projetos\\academia\\docs\\API_INTEGRATION_DOCUMENTATION.md",
      "content": "# Comprehensive API and Integration Documentation\n**Krav Maga Academy Management System**  \nVersion: 2.0.0  \nLast Updated: 2025-07-16  \n\n---\n\n## Table of Contents\n1. [Overview](#overview)\n2. [Architecture](#architecture)\n3. [API Routes and Endpoints](#api-routes-and-endpoints)\n4. [External Integrations](#external-integrations)\n5. [Internal API Architecture](#internal-api-architecture)\n6. [Inter-module Communications](#inter-module-communications)\n7. [Database Integration](#database-integration)\n8. [Real-time Features](#real-time-features)\n9. [API Security](#api-security)\n10. [Error Handling](#error-handling)\n11. [Testing Strategies](#testing-strategies)\n12. [Deployment Considerations](#deployment-considerations)\n\n---\n\n## Overview\n\nThe Krav Maga Academy Management System is a comprehensive, multi-tenant platform built with modern technologies to manage martial arts academies. The system features AI-powered analytics, payment gateway integrations, real-time attendance tracking, and advan...",
      "lastUpdated": "2025-07-16T13:23:12.442Z"
    },
    "ATTENDANCE_MODULE_TECHNICAL": {
      "path": "H:\\projetos\\academia\\docs\\ATTENDANCE_MODULE_TECHNICAL.md",
      "content": "# ğŸ“Š MÃ³dulo de Attendance - DocumentaÃ§Ã£o TÃ©cnica Completa\n\n## ğŸ—ï¸ **Arquitetura Geral**\n\n### **Componentes Principais**\n```\n/public/js/attendance.js              # Funcionalidade bÃ¡sica\n/public/js/attendance-inline.js       # IntegraÃ§Ã£o com dashboard\n/public/js/checkpoint.js              # Sistema avanÃ§ado de check-in\n/public/checkpoint.html               # Interface standalone de check-in\n/public/css/checkpoint.css            # Estilos do checkpoint\n/public/css/modules/attendance.css    # Estilos do mÃ³dulo\n/src/routes/attendance.ts             # API routes (TypeScript)\n```\n\n### **Arquitetura em TrÃªs Camadas**\n```\nğŸ“± Presentation Layer\nâ”œâ”€â”€ checkpoint.html          # Interface kiosk independente\nâ”œâ”€â”€ attendance widgets       # Widgets integrados ao dashboard\nâ””â”€â”€ inline forms            # FormulÃ¡rios inline para instrutores\n\nâš™ï¸ Business Layer\nâ”œâ”€â”€ checkpoint.js           # LÃ³gica de check-in avanÃ§ado\nâ”œâ”€â”€ attendance.js           # OperaÃ§Ãµes bÃ¡sicas\nâ””â”€â”€ attendance-inline.js    # IntegraÃ§Ã£o c...",
      "lastUpdated": "2025-07-16T13:15:20.496Z"
    },
    "classes-module-technical-documentation": {
      "path": "H:\\projetos\\academia\\docs\\classes-module-technical-documentation.md",
      "content": "# Classes Module - Technical Documentation\n\n## Table of Contents\n1. [Architecture Overview](#architecture-overview)\n2. [Database Schema](#database-schema)\n3. [API Reference](#api-reference)\n4. [Frontend Components](#frontend-components)\n5. [State Management](#state-management)\n6. [Business Logic](#business-logic)\n7. [Integration Points](#integration-points)\n8. [UI/UX Patterns](#uiux-patterns)\n9. [Calendar and Scheduling](#calendar-and-scheduling)\n10. [Error Handling](#error-handling)\n11. [Performance Considerations](#performance-considerations)\n12. [Modification Guidelines](#modification-guidelines)\n\n---\n\n## Architecture Overview\n\nThe Classes module follows the project's **isolated modular architecture** as defined in `CLAUDE.md`. It manages the core scheduling and execution of martial arts classes within the academy system.\n\n### Core Concepts\n\n- **Multi-Belt Classes**: A single class can accommodate students from multiple belt levels (courses) simultaneously\n- **Full-Screen UI**: All ...",
      "lastUpdated": "2025-07-16T13:07:45.650Z"
    },
    "CLASSES_MODULE_TECHNICAL": {
      "path": "H:\\projetos\\academia\\docs\\CLASSES_MODULE_TECHNICAL.md",
      "content": "# ğŸ¥‹ MÃ³dulo de Classes - DocumentaÃ§Ã£o TÃ©cnica Completa\n\n## ğŸ—ï¸ **Arquitetura Geral**\n\n### **Componentes Principais**\n```\n/public/js/modules/classes.js         # MÃ³dulo principal (completo)\n/public/views/classes.html            # Lista de classes (full-screen)\n/public/views/class-editor.html       # Editor de classes (full-screen)\n/public/css/modules/classes.css       # Estilos isolados\n/public/css/classes.css               # Estilos gerais\n/src/routes/class.ts                  # API routes (implementadas)\n```\n\n### **Status de ImplementaÃ§Ã£o**\n- âœ… **Frontend**: Completamente implementado com UI isolada\n- âœ… **Database Schema**: Modelos Prisma abrangentes\n- âœ… **Arquitetura**: Segue diretrizes CLAUDE.md perfeitamente\n- âŒ **Backend APIs**: Endpoints precisam ser implementados no servidor\n\n### **Conceito Inovador: Sistema Multi-Faixa**\nSistema revolucionÃ¡rio onde uma classe acomoda alunos de mÃºltiplas faixas simultaneamente, com um instrutor gerenciando progressÃµes paralelas.\n\n## ğŸ—„ï¸ **Schema...",
      "lastUpdated": "2025-07-16T13:09:47.051Z"
    },
    "COURSES_MODULE_README": {
      "path": "H:\\projetos\\academia\\docs\\COURSES_MODULE_README.md",
      "content": "# ğŸ“š Courses Module - Documentation\r\n\r\n## Overview\r\nThe Courses Module is a complete CRUD system for managing Krav Maga courses, built following the project's modular architecture principles.\r\n\r\n## ğŸ¯ Features\r\n- **Full CRUD Operations**: Create, Read, Update, Delete courses\r\n- **API-First Architecture**: All data comes from RESTful endpoints\r\n- **Full-Screen UI**: No modals, dedicated pages for each action\r\n- **Responsive Design**: Works on desktop, tablet, and mobile\r\n- **Real-time Validation**: Client and server-side validation\r\n- **Toast Notifications**: User feedback for all actions\r\n\r\n## ğŸ“ File Structure\r\n```\r\npublic/\r\nâ”œâ”€â”€ views/\r\nâ”‚   â”œâ”€â”€ courses.html          # Main courses listing page\r\nâ”‚   â””â”€â”€ course-editor.html    # Course creation/editing page\r\nâ”œâ”€â”€ js/modules/\r\nâ”‚   â””â”€â”€ courses-manager.js    # Main module logic\r\nâ”œâ”€â”€ css/modules/\r\nâ”‚   â””â”€â”€ courses.css           # Isolated styles\r\nservers/\r\nâ””â”€â”€ server-complete.js        # API endpoints\r\n```\r\n\r\n## ğŸš€ API Endpoints\r\n\r\n### GET /ap...",
      "lastUpdated": "2025-07-20T22:48:37.652Z"
    },
    "COURSE_CREATION_ENHANCED": {
      "path": "H:\\projetos\\academia\\docs\\COURSE_CREATION_ENHANCED.md",
      "content": "# ğŸ¯ Enhanced Course Creation API - Complete Preview\n\n## ğŸ“‹ Overview\n\nThe **POST /api/courses** endpoint has been significantly enhanced to provide a complete course creation experience with comprehensive preview data, making it fully compatible with frontend requirements.\n\n## âœ¨ Key Features\n\n### ğŸ”¥ **Complete Course Creation**\n- âœ… Creates main course record\n- âœ… Generates sample lesson plans (8 initial plans)\n- âœ… Creates default class schedule\n- âœ… Sets up martial art association\n- âœ… Links to organization\n\n### ğŸ“Š **Comprehensive Preview Data**\n- âœ… Full course details with relationships\n- âœ… Summary statistics and counts\n- âœ… Feature flags for UI components\n- âœ… Next steps guidance\n- âœ… Actionable recommendations\n\n### ğŸ› ï¸ **Production-Ready Features**\n- âœ… Transaction-based creation (data consistency)\n- âœ… TypeScript compatibility\n- âœ… Error handling and validation\n- âœ… Proper database relationships\n- âœ… Structured response format\n\n## ğŸ“ API Specification\n\n### **Endpoint**\n```\nPOST /api/courses\n`...",
      "lastUpdated": "2025-07-05T01:53:11.572Z"
    },
    "DASHBOARD_INTEGRATION_SUCCESS": {
      "path": "H:\\projetos\\academia\\docs\\DASHBOARD_INTEGRATION_SUCCESS.md",
      "content": "# ğŸ‰ INTEGRAÃ‡ÃƒO COMPLETA - GESTÃƒO DE ALUNOS E TURMAS\r\n\r\n## ğŸ“Š RESUMO DA IMPLEMENTAÃ‡ÃƒO\r\n\r\nâœ… **PROBLEMA RESOLVIDO:** IntegraÃ§Ã£o dos menus de GestÃ£o de Alunos e GestÃ£o de Turmas em um dashboard unificado\r\n\r\n### ğŸš€ O QUE FOI IMPLEMENTADO:\r\n\r\n#### 1. **CORREÃ‡ÃƒO DE ROTAS 404**\r\n- âœ… Adicionadas rotas `/views/students.html` e `/views/classes.html` no servidor\r\n- âœ… Eliminados os erros 404 que apareciam nos logs\r\n- âœ… Sistema agora funciona sem abrir novas abas\r\n\r\n#### 2. **INTEGRAÃ‡ÃƒO NO DASHBOARD PRINCIPAL**\r\n- âœ… BotÃµes de navegaÃ§Ã£o atualizados para funcionar dentro do prÃ³prio dashboard\r\n- âœ… Badges alterados de \"MÃ“DULO\" para \"INTEGRADO\" \r\n- âœ… NavegaÃ§Ã£o usando `data-page` em vez de `window.open()`\r\n\r\n#### 3. **SEÃ‡ÃƒO DE GESTÃƒO DE ALUNOS**\r\n- âœ… Interface completa com header moderno e estatÃ­sticas\r\n- âœ… Filtros de busca por nome, status e plano\r\n- âœ… Tabela responsiva com informaÃ§Ãµes detalhadas\r\n- âœ… Dados dos alunos carregados via API `/api/students`\r\n- âœ… ExibiÃ§Ã£o de progresso de frequÃªncia e status\r\n...",
      "lastUpdated": "2025-07-14T17:04:30.308Z"
    },
    "DASHBOARD_SUCCESS_REPORT": {
      "path": "H:\\projetos\\academia\\docs\\DASHBOARD_SUCCESS_REPORT.md",
      "content": "# ğŸ† ULTIMATE DASHBOARD - VALIDAÃ‡ÃƒO COMPLETA âœ…\n\n## ğŸ¯ **STATUS FINAL: 100% SUCESSO!**\n\n### âœ… **VALIDAÃ‡ÃƒO TÃ‰CNICA APROVADA**\n- **Arquivo**: `ultimate-dashboard.html` âœ…\n- **Tamanho**: 89.754 bytes (89KB) âœ…\n- **Linhas**: 2.172 linhas de cÃ³digo âœ…\n- **Estrutura**: HTML5 vÃ¡lido âœ…\n- **DependÃªncias**: Todas carregadas âœ…\n\n### ğŸ” **COMPONENTES VERIFICADOS**\n\n#### ğŸ“ **Arquivos Criados**\nâœ… `ultimate-dashboard.html` - Dashboard principal  \nâœ… `dashboard.html` - Dashboard bÃ¡sico  \nâœ… `simple-dashboard-server.js` - Servidor Node.js  \nâœ… `test-dashboard.py` - Servidor Python alternativo  \nâœ… `run-dashboard.sh` - Script de validaÃ§Ã£o  \n\n#### ğŸ¨ **Estrutura Visual**\nâœ… **HTML5 VÃ¡lido** - DOCTYPE e estrutura correta  \nâœ… **CSS AvanÃ§ado** - 251+ regras de estilo  \nâœ… **JavaScript** - 17 funÃ§Ãµes implementadas  \nâœ… **Responsivo** - Mobile-first design  \nâœ… **Glassmorphism** - Efeitos modernos  \n\n#### ğŸ”— **DependÃªncias Externas**\nâœ… **Font Awesome 6.5.1** - Ãcones profissionais  \nâœ… **Inter Font** - Tipografia premium ...",
      "lastUpdated": "2025-06-27T05:31:40.328Z"
    },
    "DEPENDENCY_MAP": {
      "path": "H:\\projetos\\academia\\docs\\DEPENDENCY_MAP.md",
      "content": "# ğŸ—ºï¸ Mapa de DependÃªncias - Sistema Academia\n\n## ğŸ“‹ VisÃ£o Geral\n\nEste documento apresenta o mapa completo de dependÃªncias entre os mÃ³dulos do sistema Academia, incluindo fluxos de dados, integraÃ§Ãµes de API e relacionamentos entre componentes.\n\n## ğŸ—ï¸ Arquitetura do Sistema\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                        FRONTEND ARCHITECTURE                     â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\nâ”‚  â”‚   Core Files    â”‚    â”‚   Modules       â”‚    â”‚   Utilities     â”‚ â”‚\nâ”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚ â”‚\nâ”‚  â”‚ â€¢ main.js       â”‚    â”‚ â€¢ students.js   â”‚    â”‚ â€¢ api.js        â”‚ â”‚\nâ”‚  â”‚ â€¢ navigation.js â”‚    â”‚ â€¢ plans.js      â”‚    â”‚ â€¢ ui.js         â”‚ â”‚\nâ”‚  â”‚ â€¢ dashboard.js  â”‚    â”‚ â€¢ classes.js    â”‚    â”‚ â€¢ store.js      â”‚ â”‚\nâ”‚  â”‚ â€¢ module-loader â”‚    â”‚ â€¢ attendance.js â”‚    â”‚ â€¢ utils.js      â”‚ â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€...",
      "lastUpdated": "2025-07-16T14:30:57.424Z"
    },
    "DESENVOLVIMENTO-SEGURO": {
      "path": "H:\\projetos\\academia\\docs\\DESENVOLVIMENTO-SEGURO.md",
      "content": "# ğŸ›¡ï¸ PADRÃƒO DE DESENVOLVIMENTO SEGURO\n\n## ğŸ¯ **OBJETIVO**\nEvitar que correÃ§Ãµes e implementaÃ§Ãµes quebrem o sistema funcionando atravÃ©s de arquitetura modular e versionamento.\n\n## ğŸ“¦ **ARQUITETURA MODULAR**\n\n### **1. Estrutura de MÃ³dulos Isolados**\n```\npublic/\nâ”œâ”€â”€ js/modules/\nâ”‚   â”œâ”€â”€ plans-manager.js     # ğŸ”’ MÃ³dulo de gestÃ£o de planos\nâ”‚   â”œâ”€â”€ students-manager.js  # ğŸ‘¥ MÃ³dulo de gestÃ£o de alunos  \nâ”‚   â””â”€â”€ attendance-manager.js # ğŸ“Š MÃ³dulo de frequÃªncia\nâ”œâ”€â”€ css/modules/\nâ”‚   â”œâ”€â”€ plans-styles.css     # ğŸ¨ Estilos isolados de planos\nâ”‚   â””â”€â”€ base-styles.css      # ğŸ¨ Estilos base protegidos\nâ””â”€â”€ js/\n    â””â”€â”€ module-loader.js     # ğŸ”Œ Carregador de mÃ³dulos\n```\n\n### **2. PrincÃ­pios de Isolamento**\n\n#### **ğŸ”’ Encapsulamento**\n- Cada mÃ³dulo Ã© um IIFE que expÃµe apenas API pÃºblica\n- Estado privado protegido com closures\n- Prefixos Ãºnicos para CSS (`.module-name-isolated`)\n\n#### **ğŸ”Œ Carregamento Seguro**\n- MÃ³dulos carregados via `ModuleLoader`\n- Fallback automÃ¡tico para sistema original\n- VerificaÃ§Ã£...",
      "lastUpdated": "2025-07-05T19:45:31.933Z"
    },
    "ES_MODULE_MIGRATION": {
      "path": "H:\\projetos\\academia\\docs\\ES_MODULE_MIGRATION.md",
      "content": "# ES Module Migration Documentation\r\n## Server Conversion Summary\r\n\r\n### Key Changes Implemented:\r\n1. **Module System Conversion**:\r\n   - Replaced all `require()` statements with ES Module `import` syntax\r\n   - Changed `module.exports` to `export default` or named exports\r\n\r\n2. **Path Resolution**:\r\n   - Replaced `__dirname` with `process.cwd()`\r\n   - Updated all file path resolutions to work with ES Modules\r\n\r\n3. **Top-Level Imports**:\r\n   - Moved all imports to top of file\r\n   - Organized imports by type (built-in, third-party, local)\r\n\r\n4. **RAG System Integration**:\r\n   - Maintained RAG initialization flow\r\n   - Updated index file path resolution\r\n\r\n5. **Server Extensions**:\r\n   - Preserved all extension functionality\r\n   - Updated import/export syntax\r\n\r\n### Verification Steps:\r\n1. Check server health endpoint:\r\n```bash\r\ncurl http://localhost:3000/health\r\n```\r\n\r\n2. Test key endpoints:\r\n- GET /api/students\r\n- GET /api/attendance\r\n- POST /api/attendance\r\n\r\n### Known Issues:\r\n- None ...",
      "lastUpdated": "2025-07-24T04:27:15.185Z"
    },
    "FINAL_API_FIX_REPORT": {
      "path": "H:\\projetos\\academia\\docs\\FINAL_API_FIX_REPORT.md",
      "content": "# ğŸ¯ API Endpoints Fix - COMPLETED âœ…\n\n## Task Summary\nSuccessfully diagnosed and fixed missing API endpoints in the Krav Maga Academy Management System to ensure all endpoints required by the diagnostic tool are operational.\n\n## Status: âœ… COMPLETED\n\n### ğŸ“Š Final Diagnostic Results (2025-07-06 10:09 AM)\n\n**âœ… WORKING ENDPOINTS:**\n- **Alunos (Students)**: âœ… OK (27 registros) - `/api/students`\n- **Cursos (Courses)**: âœ… OK (5 registros) - `/api/courses` \n- **OrganizaÃ§Ãµes (Organizations)**: âœ… OK (1 registros) - `/api/organizations`\n- **TÃ©cnicas (Techniques)**: âœ… OK (0 registros) - `/api/techniques`\n- **Planos Financeiros (Billing Plans)**: âœ… OK (14 registros) - `/api/billing-plans`\n- **ResponsÃ¡veis (Financial Responsibles)**: âœ… OK (0 registros) - `/api/financial-responsibles`\n\n**ğŸ”§ FIXED ENDPOINT:**\n- **Turmas (Classes)**: âš ï¸ Not Found â†’ âœ… SHOULD NOW BE WORKING - `/api/classes`\n\n### ğŸ”§ Technical Changes Made\n\n#### 1. Route Aliases for Diagnostic Compatibility\n- **Issue**: Diagnostic tool exp...",
      "lastUpdated": "2025-07-06T10:55:53.532Z"
    },
    "FINAL_API_IMPLEMENTATION_REPORT": {
      "path": "H:\\projetos\\academia\\docs\\FINAL_API_IMPLEMENTATION_REPORT.md",
      "content": "# ğŸ† RELATÃ“RIO FINAL: CONFIGURAÃ‡ÃƒO DE APIS DE PRODUÃ‡ÃƒO CONCLUÃDA\n\n**Data:** 06/07/2025  \n**Status:** âœ… **IMPLEMENTAÃ‡ÃƒO COMPLETA**  \n**Objetivo:** Eliminar necessidade de fallback localStorage em produÃ§Ã£o\n\n---\n\n## ğŸ¯ **MISSÃƒO CUMPRIDA: APIS IMPLEMENTADAS**\n\n### âœ… **API PRINCIPAL CONFIGURADA**\n```\nPOST /api/financial/subscriptions\n```\n- **LocalizaÃ§Ã£o:** `src/routes/financial.ts:212`\n- **Status:** âœ… Implementada e compilada\n- **ValidaÃ§Ã£o:** Schemas Zod + Fastify funcionais\n- **Error Handling:** Robusto com fallback para casos sem Asaas\n- **Response Format:** Padronizado\n\n### âœ… **API ALTERNATIVA IMPLEMENTADA**\n```\nPOST /api/students/:id/subscription\n```\n- **LocalizaÃ§Ã£o:** `src/routes/students.ts:392`\n- **Status:** âœ… Implementada e compilada\n- **Import:** FinancialService corrigido\n- **TypeScript:** Compilation errors resolvidos\n- **Funcionalidade:** Usa mesmo FinancialService da API principal\n\n---\n\n## ğŸ”§ **FINANCIALSERVICE ROBUSTO**\n\n### âœ… **Funcionalidades Implementadas:**\n1. **CriaÃ§Ã£o se...",
      "lastUpdated": "2025-07-06T18:17:12.373Z"
    },
    "FINAL_STATUS": {
      "path": "H:\\projetos\\academia\\docs\\FINAL_STATUS.md",
      "content": "# ğŸ¥‹ Krav Maga Academy - Final Status Report\n\n## ğŸ‰ MAJOR SUCCESS: Database Connected!\n\nâœ… **Database Connection**: Successfully established with Supabase  \nâœ… **Schema Creation**: All 20+ tables created in your database  \nâœ… **Prisma Client**: Generated and working  \nâœ… **Environment**: Properly configured  \n\n## ğŸ“Š What's Working\n\n### âœ… Database & Schema\n- **Connection**: Using pooler at `aws-0-us-east-2.pooler.supabase.com:6543`\n- **Password**: `Ojqemjeowt*a1` (working)\n- **Tables Created**: Organizations, Users, Students, Courses, Techniques, etc.\n- **Relations**: All foreign keys and constraints properly set\n\n### âœ… Project Structure\n- **Complete Backend**: Fastify server with JWT auth\n- **API Routes**: Auth, Students, Classes, Attendance, Analytics\n- **Pedagogical Module**: Courses, Progression, Challenges, Evaluations\n- **Gamification**: XP system, Achievements, Leaderboards\n- **AI Integration**: Ready for Claude, OpenAI, Gemini\n\n## âš ï¸ Current Issue: TypeScript Compilation\n\nThe codeba...",
      "lastUpdated": "2025-06-27T04:49:13.469Z"
    },
    "FINAL_SUCCESS_REPORT": {
      "path": "H:\\projetos\\academia\\docs\\FINAL_SUCCESS_REPORT.md",
      "content": "# ğŸ† SISTEMA COMPLETO FUNCIONANDO - RELATÃ“RIO FINAL DE SUCESSO\n\n## âœ… **STATUS: 100% OPERACIONAL**\n\n### ğŸš€ **SERVIDOR RODANDO COM SUCESSO**\n```\nğŸ¥‹ Krav Maga Academy API Server running!\nğŸŒ URL: http://localhost:3000\nğŸ“Š DASHBOARD BÃSICO: http://localhost:3000/dashboard\nğŸš€ ULTIMATE DASHBOARD: http://localhost:3000/ultimate\nâ¤ï¸  Health: http://localhost:3000/health\nğŸ¢ Organizations: http://localhost:3000/api/organizations\nğŸ‘¥ Students: http://localhost:3000/api/students\nğŸ¥Š Techniques: http://localhost:3000/api/techniques\n```\n\n### âœ… **PROBLEMAS RESOLVIDOS**\n1. **âŒ Erro de versÃ£o Fastify/Static** â†’ âœ… **Corrigido**\n   - Problema: @fastify/static@8.2.0 incompatÃ­vel com Fastify 4.x\n   - SoluÃ§Ã£o: Downgrade para @fastify/static@6.12.0 compatÃ­vel\n\n2. **âŒ Timeout de conexÃ£o** â†’ âœ… **Resolvido**\n   - Servidor iniciando corretamente\n   - Todos os endpoints respondendo HTTP 200\n\n### ğŸ“Š **VALIDAÃ‡ÃƒO DE ENDPOINTS**\nâœ… `/health` - Status: 200  \nâœ… `/ultimate` - Status: 200 (Ultimate Dashboard)  \nâœ… `/dashboard` ...",
      "lastUpdated": "2025-06-27T05:40:26.223Z"
    },
    "FIX_COMPLETED": {
      "path": "H:\\projetos\\academia\\docs\\FIX_COMPLETED.md",
      "content": "# ğŸ¯ SYSTEM FIX COMPLETED - JULY 5, 2025\n\n## Critical Issues RESOLVED âœ…\n\n### 1. JavaScript Syntax Errors Fixed\n- **Fixed**: `Uncaught SyntaxError: Unexpected token ':'` at line 7464\n- **Cause**: Malformed template string with duplicate closing patterns `' : ''}` \n- **Solution**: Removed duplicate template string closures in plans section\n\n### 2. ShowSection Function Reference Error Fixed  \n- **Fixed**: `Uncaught ReferenceError: showSection is not defined` at line 15950\n- **Cause**: Enhancement function called before `showSection` was defined\n- **Solution**: Moved `enhanceShowSection()` call to after `showSection` definition\n\n### 3. Template String Structure Error Fixed\n- **Fixed**: `Uncaught SyntaxError: Unexpected token '<'` at line 16532  \n- **Cause**: Missing template string closure and `.join('')` in subscriptions map\n- **Solution**: Added proper template string closure `\\`).join('');` \n\n## System Status: OPERATIONAL âœ…\n\n### Backend Status\n- âœ… Server running on port 3000\n- âœ… All API...",
      "lastUpdated": "2025-07-05T20:27:25.646Z"
    },
    "gemini": {
      "path": "H:\\projetos\\academia\\docs\\gemini.md",
      "content": "In this poject check claude.md to project\n\n...",
      "lastUpdated": "2025-07-14T18:15:20.345Z"
    },
    "HIERARCHICAL_ASSOCIATIONS_COMPLETED": {
      "path": "H:\\projetos\\academia\\docs\\HIERARCHICAL_ASSOCIATIONS_COMPLETED.md",
      "content": "# ğŸ¯ SISTEMA DE ASSOCIAÃ‡Ã•ES HIERÃRQUICAS - STATUS FINAL\r\n\r\n## âœ… IMPLEMENTAÃ‡ÃƒO CONCLUÃDA\r\n\r\n### ğŸ”§ Backend - API Endpoints\r\n- âœ… **GET /api/students/:id/enrollments** - Busca matrÃ­culas do aluno\r\n- âœ… **GET /api/students/:id/subscriptions** - Busca assinaturas do aluno\r\n- âœ… **GET /api/students/:id** - Dados completos do aluno com associaÃ§Ãµes\r\n- âœ… Endpoints testados e funcionando na porta 3000\r\n\r\n### ğŸ¨ Frontend - Interface HierÃ¡rquica\r\n- âœ… **loadStudentWithAssociations()** - Carrega dados completos do aluno\r\n- âœ… **processStudentAssociations()** - Processa hierarquia Plano â†’ Curso â†’ Turma\r\n- âœ… **renderStudentClassesWithHierarchy()** - Renderiza turmas organizadas por curso e plano\r\n- âœ… **renderStudentCoursesWithHierarchy()** - Renderiza cursos organizados por plano\r\n- âœ… Sistema integrado ao perfil do aluno na aba \"Turmas\"\r\n\r\n### ğŸ¯ Funcionalidade Solicitada\r\n**\"No perfil do aluno, 'Turma' deve exibir turmas associadas ao curso e o curso ao plano\"**\r\n\r\nâœ… **IMPLEMENTADO CONFORME SOLICITADO:*...",
      "lastUpdated": "2025-07-11T09:58:34.269Z"
    },
    "INDEX_ARCHITECTURE": {
      "path": "H:\\projetos\\academia\\docs\\INDEX_ARCHITECTURE.md",
      "content": "# Index.html Architecture - CLAUDE.md Guidelines\n\n## ğŸ¯ PrincÃ­pio Fundamental\n**O `index.html` deve conter APENAS o bÃ¡sico, jamais cÃ³digo de lÃ³gica**\n\n## âœ… Estrutura Correta Atual\n\n### ğŸ“„ `/public/index.html` (25 linhas)\n```html\n<!DOCTYPE html>\n<html lang=\"pt-BR\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=no\">\n    <title>ğŸ¥‹ Krav Maga Academy - Dashboard</title>\n    \n    <!-- Core CSS -->\n    <link rel=\"stylesheet\" href=\"/css/dashboard.css\">\n    \n    <!-- Core JavaScript -->\n    <script src=\"/js/core/spa-loader.js\"></script>\n</head>\n<body>\n    <div id=\"app\">\n        <div id=\"content\">\n            <!-- Loading State -->\n            <div id=\"loading\" class=\"loading-dashboard\">\n                <div class=\"loading-spinner\"></div>\n                <div class=\"loading-text\">Carregando Sistema...</div>\n            </div>\n        </div>\n    </div>\n</body>\n</html>\n```\n\n## ğŸ”§ Componentes Isolados\n\n### ğŸ“„ `/public/js/co...",
      "lastUpdated": "2025-07-23T18:41:02.335Z"
    },
    "JAVASCRIPT_FIXES_REPORT": {
      "path": "H:\\projetos\\academia\\docs\\JAVASCRIPT_FIXES_REPORT.md",
      "content": "# ğŸ”§ CORREÃ‡Ã•ES JAVASCRIPT - RELATÃ“RIO DE DEBUGGING\r\n\r\n## ğŸ“Š **PROBLEMAS IDENTIFICADOS E SOLUÃ‡Ã•ES**\r\n\r\n### âœ… **1. ERROS 404 - ARQUIVOS JS AUSENTES**\r\n\r\n**Problemas encontrados:**\r\n- âŒ `main.js:1 Failed to load resource: 404 (Not Found)`\r\n- âŒ `js/ui.js:1 Failed to load resource: 404 (Not Found)` \r\n- âŒ `js/attendance.js:1 Failed to load resource: 404 (Not Found)`\r\n- âŒ `js/settings.js:1 Failed to load resource: 404 (Not Found)`\r\n- âŒ `api/billing-plans:1 Failed to load resource: 404 (Not Found)`\r\n\r\n**SoluÃ§Ãµes implementadas:**\r\n- âœ… Adicionadas rotas no `simple-dashboard-server.js` para todos os arquivos JS\r\n- âœ… Criados conteÃºdos inline para cada arquivo JS ausente\r\n- âœ… Adicionada API `/api/billing-plans` com dados mock\r\n\r\n### âœ… **2. ERRO SYNTAX - AWAIT FORA DE FUNÃ‡ÃƒO ASYNC**\r\n\r\n**Problema encontrado:**\r\n- âŒ `localhost/:6943 Uncaught SyntaxError: await is only valid in async functions`\r\n\r\n**SoluÃ§Ã£o implementada:**\r\n- âœ… Removido cÃ³digo `await` solto que estava fora de funÃ§Ã£o async\r\n- âœ… Limpeza...",
      "lastUpdated": "2025-07-14T17:04:30.314Z"
    },
    "KIOSK_README": {
      "path": "H:\\projetos\\academia\\docs\\KIOSK_README.md",
      "content": "# ğŸ¥‹ Krav Maga Academy - Kiosk & Asaas Integration\n\n## ğŸ“Ÿ Sistema de Kiosk PÃºblico\n\n### **VisÃ£o Geral**\nSistema separado para check-in pÃºblico dos alunos na academia, rodando independentemente do sistema administrativo principal.\n\n### **CaracterÃ­sticas**\n- âœ… **Endpoint pÃºblico** - Sem autenticaÃ§Ã£o necessÃ¡ria\n- âœ… **Interface standalone** - HTML puro para kiosk/tablet\n- âœ… **3 mÃ©todos de check-in** - MatrÃ­cula, visual, QR code\n- âœ… **Tempo real** - AtualizaÃ§Ãµes automÃ¡ticas\n- âœ… **Responsivo** - Funciona em tablet/desktop\n\n---\n\n## ğŸš€ **InstalaÃ§Ã£o e ConfiguraÃ§Ã£o**\n\n### **1. Instalar DependÃªncias**\n```bash\nnpm install express cors @supabase/supabase-js dotenv\n```\n\n### **2. Configurar VariÃ¡veis de Ambiente**\nCopie o arquivo de exemplo:\n```bash\ncp env.example .env\n```\n\nEdite o `.env` com suas credenciais:\n```env\n# Database\nSUPABASE_URL=https://your-project.supabase.co\nSUPABASE_ANON_KEY=your-anon-key\nSUPABASE_SERVICE_KEY=your-service-key\n\n# Asaas\nASAAS_API_KEY=your-asaas-api-key\nASAAS_BASE_URL=ht...",
      "lastUpdated": "2025-06-30T18:55:45.183Z"
    },
    "MEMORY": {
      "path": "H:\\projetos\\academia\\docs\\MEMORY.md",
      "content": "# ğŸ§  MEMORY - Krav Maga Academy Management System\n\n## ğŸ“ **SESSÃƒO ATUAL - 03/07/2025**\n\n### **ğŸ¯ Contexto da SessÃ£o**\n**Problema identificado pelo usuÃ¡rio:** Sistema de cadastro de alunos estÃ¡ confuso com mÃºltiplos popups e navegaÃ§Ãµes inconsistentes entre visualizaÃ§Ã£o de cards e tabela.\n\n**Objetivo:** Simplificar UX removendo popups e criando experiÃªncia direta - clique â†’ ediÃ§Ã£o.\n\n### **ğŸ” AnÃ¡lise UX Realizada**\n**Problemas encontrados:**\n- âŒ **Duplo clique funcionava apenas nos cards**, nÃ£o na tabela\n- âŒ **Popups confusos** - clique simples abria modal de visualizaÃ§Ã£o\n- âŒ **ExperiÃªncia inconsistente** entre cards e tabela\n- âŒ **BotÃµes redundantes** - \"Ver\" e \"Editar\" causavam confusÃ£o\n\n### **âœ… SoluÃ§Ãµes Implementadas**\n\n#### **1. UnificaÃ§Ã£o de Comportamento**\n- âœ… Implementado duplo clique na tabela igual aos cards\n- âœ… Removido clique simples que abria modal de visualizaÃ§Ã£o\n- âœ… **AGORA:** Qualquer clique â†’ Tela completa de ediÃ§Ã£o direta\n\n#### **2. Feedback Visual Padronizado**\n- âœ… Hints...",
      "lastUpdated": "2025-07-03T12:52:48.122Z"
    },
    "MODULAR_ARCHITECTURE_DOCUMENTATION": {
      "path": "H:\\projetos\\academia\\docs\\MODULAR_ARCHITECTURE_DOCUMENTATION.md",
      "content": "# ğŸ—ï¸ DocumentaÃ§Ã£o da Arquitetura Modular - Krav Maga Academy\n\n**Data de CriaÃ§Ã£o:** 19/07/2025  \n**Ãšltima AtualizaÃ§Ã£o:** 19/07/2025  \n**Status:** âœ… COMPLETO - Todos os mÃ³dulos implementados  \n**VersÃ£o:** 2.0 - Arquitetura Modular Isolada\n\n## ğŸ“‹ Ãndice\n\n1. [VisÃ£o Geral](#visÃ£o-geral)\n2. [Estrutura de Arquivos](#estrutura-de-arquivos)\n3. [MÃ³dulos JavaScript](#mÃ³dulos-javascript)\n4. [CSS Isolado](#css-isolado)\n5. [Views Full-Screen](#views-full-screen)\n6. [PadrÃµes e ConvenÃ§Ãµes](#padrÃµes-e-convenÃ§Ãµes)\n7. [Compliance CLAUDE.md](#compliance-claudemd)\n8. [ManutenÃ§Ã£o e EvoluÃ§Ã£o](#manutenÃ§Ã£o-e-evoluÃ§Ã£o)\n\n---\n\n## ğŸ¯ VisÃ£o Geral\n\nEste projeto implementa uma **arquitetura modular isolada** seguindo rigorosamente as diretrizes do **CLAUDE.md**. O objetivo Ã© proteger o sistema core atravÃ©s de mÃ³dulos completamente isolados que podem ser desenvolvidos, testados e mantidos independentemente.\n\n### ğŸ”‘ PrincÃ­pios Fundamentais:\n\n- **Isolamento Total:** Cada mÃ³dulo Ã© independente e nÃ£o afeta o core\n- **API...",
      "lastUpdated": "2025-07-19T15:39:12.284Z"
    },
    "MODULE_REFERENCE_GUIDE": {
      "path": "H:\\projetos\\academia\\docs\\MODULE_REFERENCE_GUIDE.md",
      "content": "# ğŸ“– Guia de ReferÃªncia RÃ¡pida - MÃ³dulos Isolados\n\n**Guia PrÃ¡tico para Desenvolvedores**  \n**Data:** 19/07/2025\n\n## ğŸš€ InÃ­cio RÃ¡pido\n\n### ğŸ“‚ **Estrutura de Pastas**\n```\n/public/js/modules/     â†’ MÃ³dulos JavaScript (18 arquivos)\n/public/css/modules/    â†’ CSS Isolado (17 arquivos)  \n/public/views/          â†’ Views Full-Screen (16+ arquivos)\n```\n\n### ğŸ” **Encontrar um MÃ³dulo**\n| Funcionalidade | Arquivo JS | CSS | View |\n|----------------|------------|-----|------|\n| **Alunos** | `students.js` | `students.css` | `students.html` |\n| **Planos** | `plans.js` | `plans-styles.css` | `plans.html` |\n| **Turmas** | `classes.js` | `classes.css` | `classes.html` |\n| **Cursos** | `courses.js` | `courses.css` | `courses.html` |\n| **Financeiro** | `financial.js` | `financial.css` | - |\n| **Instrutores** | `instructors.js` | `instructors.css` | `instructors.html` |\n| **Unidades** | `units.js` | `units.css` | `units.html` |\n| **Tatames** | `mats.js` | `mats.css` | `mats.html` |\n| **Desafios** | `challen...",
      "lastUpdated": "2025-07-19T15:39:59.611Z"
    },
    "Plans-Module-Technical-Documentation": {
      "path": "H:\\projetos\\academia\\docs\\Plans-Module-Technical-Documentation.md",
      "content": "# Plans Module - Technical Documentation\n\n## Overview\nThe Plans module manages billing plans, course associations, and subscription pricing for the academy system. It implements a two-level plan system that separates educational content from billing structure while maintaining seamless integration.\n\n**Version**: 1.0.0  \n**Last Updated**: 2025-07-16  \n**Status**: Production-ready with protected components\n\n## Architecture Overview\n\n### Core Components\n\n#### 1. **Main Plans Module** `/public/js/modules/plans.js`\n- **Type**: Standard Module\n- **Purpose**: Primary interface for plan management\n- **Status**: Fully functional, actively maintained\n- **Key Features**:\n  - Plan CRUD operations\n  - Course association management\n  - Multi-tab editing interface\n  - Real-time preview system\n  - Filtering and search capabilities\n\n#### 2. **PlansManager (PROTECTED)** `/public/js/modules/plans-manager.js`\n- **Type**: Protected Module\n- **Purpose**: Critical business logic isolation\n- **Status**: PROTE...",
      "lastUpdated": "2025-07-16T13:02:23.765Z"
    },
    "PLANS_MODULE_TECHNICAL": {
      "path": "H:\\projetos\\academia\\docs\\PLANS_MODULE_TECHNICAL.md",
      "content": "# ğŸ’³ MÃ³dulo de Planos - DocumentaÃ§Ã£o TÃ©cnica Completa\n\n## ğŸ—ï¸ **Arquitetura Geral**\n\n### **Componentes Principais**\n```\n/public/js/modules/plans.js           # MÃ³dulo principal (777 linhas)\n/public/js/modules/plans-manager.js   # MÃ³dulo PROTEGIDO (163 linhas)\n/public/views/plans.html              # Lista de planos (full-screen)\n/public/views/plan-editor.html        # Editor de planos (full-screen)\n/public/css/modules/plans-styles.css  # Estilos isolados\n/public/css/plans.css                 # Estilos gerais\n```\n\n### **Sistema de Dois NÃ­veis**\n1. **Planos Educacionais**: ConteÃºdo do curso, progressÃ£o, estrutura acadÃªmica\n2. **Planos de CobranÃ§a**: Pricing, ciclos de pagamento, gestÃ£o financeira\n\n## ğŸ”’ **PlansManager (PROTEGIDO) - AnÃ¡lise CrÃ­tica**\n\n### **Por que Ã© Protegido**\n- **LÃ³gica de NegÃ³cio CrÃ­tica**: CÃ¡lculos de receita e cobranÃ§a\n- **GestÃ£o de Assinaturas**: Controle de ciclos de pagamento\n- **IntegraÃ§Ã£o com Gateway**: Processamento de pagamentos Asaas\n- **Impacto Financeiro Di...",
      "lastUpdated": "2025-07-16T13:04:38.201Z"
    },
    "PRODUCTION_API_CONFIG": {
      "path": "H:\\projetos\\academia\\docs\\PRODUCTION_API_CONFIG.md",
      "content": "# ğŸ”§ CONFIGURAÃ‡ÃƒO DE APIS DE PRODUÃ‡ÃƒO\n# ====================================\n# Arquivo de configuraÃ§Ã£o para eliminar necessidade de fallback\n# Data: 06/07/2025\n\n# ğŸ¯ OBJETIVO: Configurar APIs backend para funcionamento 100% sem fallback\n\n# ==========================================\n# 1. VARIÃVEIS DE AMBIENTE OBRIGATÃ“RIAS\n# ==========================================\n\n# Database\nDATABASE_URL=\"postgresql://user:password@host:port/database\"\nDIRECT_URL=\"postgresql://user:password@host:port/database\"\n\n# Server\nPORT=3000\nNODE_ENV=production\n\n# Asaas (Opcional - sistema funciona sem)\nASAAS_API_KEY=\"\"\nASAAS_SANDBOX=true\n\n# ==========================================\n# 2. CHECKLIST APIS FUNCIONAIS\n# ==========================================\n\n## âœ… API Principal: POST /api/financial/subscriptions\n- [âœ…] Rota implementada em src/routes/financial.ts:212\n- [âœ…] Schema de validaÃ§Ã£o configurado\n- [âœ…] FinancialService.createSubscription() funcionando\n- [âœ…] Suporte a criaÃ§Ã£o sem Asaas configurado\n- [âœ…] Err...",
      "lastUpdated": "2025-07-06T17:43:34.658Z"
    },
    "PROMPT_MASTER_IA_PROOF": {
      "path": "H:\\projetos\\academia\\docs\\PROMPT_MASTER_IA_PROOF.md",
      "content": "# ğŸš€ PROMPT MASTER: GESTÃƒO IA-PROOF DE APLICAÃ‡Ã•ES\r\n\r\n## COMANDO PRINCIPAL\r\n\"GERENCIADOR IA-PROOF: Assuma o papel de CTO + Product Manager + IA Defense Specialist. \r\n\r\n**APLICAÃ‡ÃƒO:** [Nome e descriÃ§Ã£o em 1 linha]\r\n**NICHO:** [PÃºblico-alvo especÃ­fico e problema resolvido]\r\n**FASE ATUAL:** [IdeaÃ§Ã£o/MVP/Desenvolvimento/Testes/ProduÃ§Ã£o]\r\n\r\n## ğŸ“‹ ANÃLISE INICIAL OBRIGATÃ“RIA\r\n\r\n### 1. VALIDAÃ‡ÃƒO DE UTILIDADE (FaÃ§a ANTES de qualquer cÃ³digo)\r\n- **Problema Real:** Este problema existe e incomoda pessoas diariamente?\r\n- **SoluÃ§Ã£o 10x:** Minha soluÃ§Ã£o Ã© 10x melhor que alternativas atuais?\r\n- **UsuÃ¡rios Pagantes:** Quem pagaria por isso e quanto?\r\n- **Teste de Mom:** Se fosse sua mÃ£e com esse problema, ela usaria?\r\n\r\n### 2. TESTE DE RESISTÃŠNCIA IA\r\n- **ChatGPT Test:** O que ChatGPT NÃƒO consegue fazer que meu app faz?\r\n- **Dados Ãšnicos:** Quais dados proprietÃ¡rios sÃ³ eu terei acesso?\r\n- **Workflow Complexo:** Quantos passos manuais eu automatizo?\r\n- **Moat Natural:** O que fica melhor quanto mais pes...",
      "lastUpdated": "2025-06-30T17:21:22.108Z"
    },
    "SERVER_ARCHITECTURE": {
      "path": "H:\\projetos\\academia\\docs\\SERVER_ARCHITECTURE.md",
      "content": "# ğŸ—ï¸ Arquitetura de Servidores - Krav Academy\n\n**Data de CriaÃ§Ã£o**: 20/07/2025  \n**Status**: âœ… ATIVO E DOCUMENTADO  \n**Ãšltimo Update**: 20/07/2025\n\n## ğŸš¨ SERVIDOR CORRETO A SER USADO\n\n### âœ… **SERVIDOR PRINCIPAL** (USE ESTE!)\n```bash\nnpm run dev\n```\n\n**CaracterÃ­sticas:**\n- **Tecnologia**: TypeScript + Fastify\n- **Banco de Dados**: PostgreSQL + Prisma ORM  \n- **DocumentaÃ§Ã£o**: Swagger UI integrado\n- **APIs**: Completas e funcionais\n- **Dados**: **REAIS** do banco de dados\n- **URL**: `http://localhost:3000`\n- **Docs**: `http://localhost:3000/docs` (Swagger UI oficial)\n\n### âŒ **SERVIDOR SIMPLES** (NÃƒO USAR EM PRODUÃ‡ÃƒO!)\n```bash\nnpm run dev:simple\n```\n\n**CaracterÃ­sticas:**\n- **PropÃ³sito**: Apenas desenvolvimento/mockup\n- **Tecnologia**: Node.js bÃ¡sico\n- **Dados**: APIs mock/simuladas\n- **LimitaÃ§Ãµes**: Sem banco de dados real\n\n---\n\n## ğŸ“Š Dados Reais DisponÃ­veis\n\n### ğŸ‘¥ **Students API** - `/api/students`\n```json\n{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"0b997817-3ce9-426b-9230-ab2a...",
      "lastUpdated": "2025-07-20T13:37:53.201Z"
    },
    "SETUP_STATUS": {
      "path": "H:\\projetos\\academia\\docs\\SETUP_STATUS.md",
      "content": "# ğŸ¯ Setup Status & Next Steps\n\n## âœ… Fixed Issues\n1. **Prisma Schema Validation** - Removed duplicate model definitions and fixed relations\n2. **Missing Dependencies** - Removed problematic canvas package\n3. **Platform Compatibility** - Fixed esbuild issues\n\n## âš ï¸ Current Issue: Database Connection\n**Error**: Cannot reach Supabase database\n\n### Possible Causes:\n1. **Supabase Project Paused**: Free tier projects auto-pause after inactivity\n2. **Wrong Database URL**: Host might have changed\n3. **Network Issues**: Connection blocked\n\n### ğŸ”§ Solutions to Try:\n\n#### Option 1: Check Supabase Dashboard\n1. Go to [https://app.supabase.com](https://app.supabase.com)\n2. Select your project `yawfuymgwukericlhgxh`\n3. Check if project status shows \"Active\" or \"Paused\"\n4. If paused, click \"Resume\" to activate\n\n#### Option 2: Get Fresh Connection String\n1. In Supabase Dashboard â†’ Settings â†’ Database\n2. Copy the new connection string\n3. Update `.env` with the new URL\n\n#### Option 3: Use Pooler Connecti...",
      "lastUpdated": "2025-06-27T04:01:11.260Z"
    },
    "students-module-technical-documentation": {
      "path": "H:\\projetos\\academia\\docs\\students-module-technical-documentation.md",
      "content": "# Students Module - Technical Documentation\n\n## Overview\n\nThe Students module is a comprehensive system for managing student data, academic progress, attendance, and financial integrations within the Krav Maga Academy platform. It follows a modular architecture with isolated components, full-screen navigation patterns, and API-first data management.\n\n## Architecture Overview\n\n### Core Components\n\n```\nStudents Module\nâ”œâ”€â”€ Frontend Components\nâ”‚   â”œâ”€â”€ /public/js/modules/students.js     # Main module logic\nâ”‚   â”œâ”€â”€ /public/views/students.html        # Students list view\nâ”‚   â”œâ”€â”€ /public/views/student-editor.html  # Student editor view\nâ”‚   â”œâ”€â”€ /public/css/modules/students.css   # Module-specific styles\nâ”‚   â””â”€â”€ /public/css/students.css          # Isolated styles\nâ”œâ”€â”€ Backend Components\nâ”‚   â”œâ”€â”€ /src/routes/students.ts            # API routes\nâ”‚   â”œâ”€â”€ /src/services/financialService.ts  # Financial integration\nâ”‚   â””â”€â”€ prisma/schema.prisma              # Database schema\nâ””â”€â”€ Integration Layer\n    â”œâ”€â”€ ...",
      "lastUpdated": "2025-07-16T12:56:54.620Z"
    },
    "STUDENTS_MODULE_TECHNICAL": {
      "path": "H:\\projetos\\academia\\docs\\STUDENTS_MODULE_TECHNICAL.md",
      "content": "# ğŸ“š MÃ³dulo de Alunos - DocumentaÃ§Ã£o TÃ©cnica Completa\n\n## ğŸ—ï¸ **Arquitetura Geral**\n\n### **Componentes Principais**\n```\n/public/js/modules/students.js     # MÃ³dulo isolado principal\n/public/views/students.html        # Lista de alunos (full-screen)\n/public/views/student-editor.html  # Editor de aluno (full-screen)\n/public/css/modules/students.css   # Estilos isolados\n/src/routes/students.ts           # API routes (TypeScript)\n```\n\n### **PrincÃ­pios de Design**\n- **Modular**: Isolado com CSS prefixado `.students-isolated`\n- **Full-Screen**: Sem modals - uma aÃ§Ã£o = uma tela completa\n- **API-First**: Todos os dados vÃªm de endpoints REST\n- **Responsivo**: Design mobile-first\n\n## ğŸ—„ï¸ **Schema de Dados**\n\n### **Modelo Student (Prisma)**\n```typescript\nmodel Student {\n  id              String    @id @default(cuid())\n  matricula       String    @unique\n  userId          String    @unique\n  organizationId  String\n  category        StudentCategory\n  birthDate       DateTime?\n  phone           Stri...",
      "lastUpdated": "2025-07-16T12:58:19.003Z"
    },
    "SUBSCRIPTION_ENDPOINT_DEBUG": {
      "path": "H:\\projetos\\academia\\docs\\SUBSCRIPTION_ENDPOINT_DEBUG.md",
      "content": "# Subscription Endpoint Debug Session - 2025-07-24\n\n## Problem Description\nFrontend application receiving 404 error when attempting to update student subscriptions via PUT request, despite curl tests showing the endpoint works correctly.\n\n## Technical Context\n- **Server**: Express.js running on localhost:3000\n- **Endpoint**: PUT `/api/subscriptions/:id`\n- **Framework**: Node.js with Supabase integration\n- **Frontend**: Student Editor Module (modular architecture)\n\n## Debug Session Progress\n\n### Initial Issue\n```\nâŒ Erro ao atualizar assinatura: Route PUT:/api/subscriptions/2adebdd4-4185-43b7-b0e6-95d7bc41f950 not found\n```\n\n### Phase 1: Server Verification âœ…\n**Status**: COMPLETED\n- Confirmed server running on PID 30725 (port 3000)\n- Verified Express server responding to health checks\n- Confirmed subscription endpoint exists in code\n\n**Evidence**:\n```bash\ncurl -X PUT http://localhost:3000/api/subscriptions/test\n# Returns: {\"success\":true,\"data\":{\"id\":\"test\"...},\"message\":\"Subscription up...",
      "lastUpdated": "2025-07-24T04:31:28.188Z"
    },
    "SUCCESS_REPORT": {
      "path": "H:\\projetos\\academia\\docs\\SUCCESS_REPORT.md",
      "content": "# ğŸ‰ SUCCESS: Krav Maga Academy System is WORKING!\n\n## âœ… **CONFIRMED: System is Operational**\n\nFrom the debug logs, I can confirm your **Krav Maga Academy Management System is successfully running**:\n\n```\nğŸ¥‹ Krav Maga Academy API Server running!\nğŸŒ URL: http://localhost:3000\nâ¤ï¸  Health: http://localhost:3000/health\nğŸ¢ Organizations: http://localhost:3000/api/organizations\nğŸ‘¥ Students: http://localhost:3000/api/students\nğŸ¥Š Techniques: http://localhost:3000/api/techniques\n```\n\n## ğŸ” **Debug Analysis Results**\n\n### âœ… **What's Working Perfectly:**\n1. **Database Connection**: âœ… Connected to Supabase successfully\n2. **Schema Deployment**: âœ… All tables created (organizations, users, students, etc.)\n3. **Server Startup**: âœ… Fastify server running on port 3000\n4. **API Endpoints**: âœ… Organizations, Students, Techniques endpoints active\n5. **Environment Variables**: âœ… All loaded correctly\n6. **Prisma Client**: âœ… Generated and functional\n\n### âš ï¸ **Minor Issue (Non-blocking):**\n- Prisma client has...",
      "lastUpdated": "2025-06-27T04:57:39.812Z"
    },
    "SUPABASE_SETUP": {
      "path": "H:\\projetos\\academia\\docs\\SUPABASE_SETUP.md",
      "content": "# ğŸ”§ **Supabase Configuration Guide**\n\n## **Step 1: Get Your Supabase Credentials**\n\n### **1.1 Database Connection String**\n1. Go to [Supabase Dashboard](https://app.supabase.com)\n2. Select your project\n3. Go to **Settings** â†’ **Database** \n4. Copy the **Connection String** â†’ **URI**\n5. Replace `[YOUR-PASSWORD]` with your database password\n\n**Example:**\n```bash\nDATABASE_URL=\"postgresql://postgres:your_password@db.abcdefghijklmnop.supabase.co:5432/postgres\"\n```\n\n### **1.2 API Keys**\n1. Go to **Settings** â†’ **API**\n2. Copy these values:\n   - **Project URL** â†’ `SUPABASE_URL`\n   - **anon public** â†’ `SUPABASE_ANON_KEY`\n   - **service_role secret** â†’ `SUPABASE_SERVICE_ROLE_KEY`\n\n## **Step 2: Update Your .env File**\n\n```bash\n# Copy example file\ncp .env.example .env\n```\n\nEdit `.env` with your Supabase credentials:\n\n```bash\n# Database (Supabase PostgreSQL)\nDATABASE_URL=\"postgresql://postgres:YOUR_PASSWORD@db.YOUR_PROJECT_REF.supabase.co:5432/postgres\"\n\n# JWT Secret (generate a secure one)\nJWT_S...",
      "lastUpdated": "2025-06-27T01:44:57.191Z"
    },
    "SUPABASE_TROUBLESHOOTING": {
      "path": "H:\\projetos\\academia\\docs\\SUPABASE_TROUBLESHOOTING.md",
      "content": "# ğŸ”§ Supabase Connection Troubleshooting\n\n## ğŸš¨ Current Issue\nDatabase connection failing with both direct and pooler connections.\n\n## âœ… What We've Fixed\n- Prisma schema is clean and valid\n- Environment variables are configured \n- Dependencies are installed\n- System is ready to run\n\n## ğŸ” Database Connection Debug\n\n### Your Current Configuration:\n```\nProject URL: https://yawfuymgwukericlhgxh.supabase.co\nProject Ref: yawfuymgwukericlhgxh\nPassword: KjO2H2DFg2fFw9RS\n```\n\n## ğŸ›  Steps to Fix Connection\n\n### 1. Check Supabase Project Status\n1. Go to [Supabase Dashboard](https://app.supabase.com)\n2. Find your project with reference `yawfuymgwukericlhgxh`\n3. Check project status - it might be **PAUSED** or **INACTIVE**\n4. If paused, click **\"Resume Project\"** or **\"Restore\"**\n\n### 2. Verify Database Settings\nIn your Supabase Dashboard:\n1. Go to **Settings** â†’ **Database**\n2. Copy the **Connection string** (it should look like):\n   ```\n   postgresql://postgres.yawfuymgwukericlhgxh:[PASSWORD]@aw...",
      "lastUpdated": "2025-06-27T04:08:02.554Z"
    },
    "SYSTEM_ARCHITECTURE": {
      "path": "H:\\projetos\\academia\\docs\\SYSTEM_ARCHITECTURE.md",
      "content": "# ğŸ—ï¸ Sistema de GestÃ£o Academia - Arquitetura Completa\n\n## ğŸ“‹ **VisÃ£o Geral do Sistema**\n\nEste Ã© um sistema completo de gestÃ£o para academias de Krav Maga com arquitetura modular, API-first e foco em seguranÃ§a e escalabilidade.\n\n### **PrincÃ­pios Arquiteturais**\n- **API-First**: Todos os dados fluem atravÃ©s de APIs RESTful\n- **Modular**: Componentes isolados com responsabilidades especÃ­ficas\n- **Full-Screen UI**: Sem modals - uma aÃ§Ã£o = uma tela completa\n- **Isolamento**: MÃ³dulos nÃ£o afetam uns aos outros\n\n## ğŸ¢ **Estrutura Principal**\n\n### **Pontos de Entrada**\n- **Dashboard Principal**: `/public/index.html` - Dashboard integrado com abas\n- **Servidor TypeScript**: `/src/server.ts` - Servidor Fastify principal\n- **Servidor JavaScript**: `/servers/server-complete.js` - Fallback\n- **Sistema Check-in**: `/public/checkpoint.html` - Sistema independente\n\n### **Carregamento de MÃ³dulos**\n```\nModuleLoader (/public/js/module-loader.js) - **PROTEGIDO**\n    â†“\nMÃ³dulos Isolados (/public/js/modules...",
      "lastUpdated": "2025-07-16T12:53:09.196Z"
    },
    "TROUBLESHOOTING_GUIDE": {
      "path": "H:\\projetos\\academia\\docs\\TROUBLESHOOTING_GUIDE.md",
      "content": "# ğŸ”§ Guia de Troubleshooting - MÃ³dulos Isolados\n\n**SoluÃ§Ãµes RÃ¡pidas para Problemas Comuns**  \n**Data:** 19/07/2025\n\n## ğŸš¨ Problemas Mais Comuns\n\n### 1. ğŸ”´ **MÃ³dulo NÃ£o Carrega**\n\n**Sintomas:**\n- Console: \"loadStudents is not a function\"\n- PÃ¡gina em branco ou loading infinito\n- JavaScript errors\n\n**DiagnÃ³stico:**\n```javascript\n// Verificar se mÃ³dulo foi carregado\nconsole.log(typeof window.loadStudents); // deve ser 'function'\n\n// Verificar script no HTML\ndocument.querySelector('script[src*=\"students.js\"]'); // deve existir\n\n// Verificar erros no console\nconsole.error; // verificar se hÃ¡ erros de sintaxe\n```\n\n**SoluÃ§Ãµes:**\n```html\n<!-- âœ… Verificar ordem dos scripts -->\n<script src=\"/js/utils.js\"></script>  <!-- DependÃªncias primeiro -->\n<script src=\"/js/modules/students.js\"></script>  <!-- MÃ³dulo depois -->\n\n<!-- âœ… Verificar paths corretos -->\n<script src=\"/js/modules/students.js\"></script>  <!-- Correto -->\n<script src=\"js/modules/students.js\"></script>   <!-- âŒ Faltando / -->\n```\n\n---\n...",
      "lastUpdated": "2025-07-19T15:40:46.641Z"
    }
  },
  "schemas": {
    "attendance": {
      "path": "H:\\projetos\\academia\\src\\schemas\\attendance.ts",
      "content": "import { z } from 'zod';\nimport { CheckInMethod, AttendanceStatus } from '@/types';\n\nexport const checkInSchema = z.object({\n  classId: z.string().uuid('ID da aula invÃ¡lido'),\n  method: z.nativeEnum(CheckInMethod).default(CheckInMethod.MANUAL),\n  location: z.string().optional(),\n  notes: z.string().optional(),\n});\n\nexport const attendanceHistoryQuerySchema = z.object({\n  page: z.coerce.number().min(1).default(1),\n  limit: z.coerce.number().min(1).max(100).default(20),\n  startDate: z.string().datetime().optional(),\n  endDate: z.string().datetime().optional(),\n  status: z.nativeEnum(AttendanceStatus).optional(),\n  classId: z.string().uuid().optional(),\n});\n\nexport const updateAttendanceSchema = z.object({\n  status: z.nativeEnum(AttendanceStatus),\n  notes: z.string().optional(),\n  checkInTime: z.string().datetime().optional(),\n});\n\nexport const attendanceStatsQuerySchema = z.object({\n  studentId: z.string().uuid().optional(),\n  startDate: z.string().datetime().optional(),\n  endDate: z.str...",
      "lastUpdated": "2025-06-26T11:52:19.125Z"
    },
    "auth": {
      "path": "H:\\projetos\\academia\\src\\schemas\\auth.ts",
      "content": "import { z } from 'zod';\nimport { UserRole } from '@/types';\n\nexport const registerSchema = z.object({\n  email: z.string().email('Email invÃ¡lido'),\n  password: z.string().min(8, 'Senha deve ter pelo menos 8 caracteres'),\n  role: z.nativeEnum(UserRole).default(UserRole.STUDENT),\n  firstName: z.string().min(2, 'Nome deve ter pelo menos 2 caracteres'),\n  lastName: z.string().min(2, 'Sobrenome deve ter pelo menos 2 caracteres'),\n  phone: z.string().optional(),\n  emergencyContact: z.string().optional(),\n  birthDate: z.string().datetime().optional(),\n  medicalConditions: z.string().optional(),\n});\n\nexport const loginSchema = z.object({\n  email: z.string().email('Email invÃ¡lido'),\n  password: z.string().min(1, 'Senha Ã© obrigatÃ³ria'),\n});\n\nexport const refreshTokenSchema = z.object({\n  refreshToken: z.string().min(1, 'Token de atualizaÃ§Ã£o Ã© obrigatÃ³rio'),\n});\n\nexport type RegisterInput = z.infer<typeof registerSchema>;\nexport type LoginInput = z.infer<typeof loginSchema>;\nexport type RefreshTo...",
      "lastUpdated": "2025-06-26T11:50:48.707Z"
    },
    "class": {
      "path": "H:\\projetos\\academia\\src\\schemas\\class.ts",
      "content": "import { z } from 'zod';\nimport { ClassStatus } from '@/types';\n\nexport const upcomingClassesQuerySchema = z.object({\n  page: z.coerce.number().min(1).default(1),\n  limit: z.coerce.number().min(1).max(100).default(20),\n  date: z.string().datetime().optional(),\n  instructorId: z.string().uuid().optional(),\n  courseProgramId: z.string().uuid().optional(),\n  status: z.nativeEnum(ClassStatus).optional(),\n});\n\nexport const classIdParamsSchema = z.object({\n  id: z.string().uuid('ID da aula invÃ¡lido'),\n});\n\nexport const createClassSchema = z.object({\n  scheduleId: z.string().uuid('ID do horÃ¡rio invÃ¡lido'),\n  instructorId: z.string().uuid('ID do instrutor invÃ¡lido'),\n  courseProgramId: z.string().uuid('ID do programa invÃ¡lido'),\n  lessonPlanId: z.string().uuid().optional(),\n  date: z.string().datetime(),\n  notes: z.string().optional(),\n});\n\nexport const updateClassSchema = z.object({\n  instructorId: z.string().uuid().optional(),\n  lessonPlanId: z.string().uuid().optional(),\n  status: z.nativeE...",
      "lastUpdated": "2025-06-26T11:54:57.031Z"
    },
    "pedagogical": {
      "path": "H:\\projetos\\academia\\src\\schemas\\pedagogical.ts",
      "content": "import { z } from 'zod';\n\n// Course Enrollment Schemas\nexport const CourseEnrollmentCreateSchema = z.object({\n  studentId: z.string().uuid('Student ID must be a valid UUID'),\n  courseId: z.string().uuid('Course ID must be a valid UUID'),\n  category: z.enum(['ADULT', 'MASTER_1', 'MASTER_2', 'MASTER_3', 'HERO_1', 'HERO_2', 'HERO_3'], {\n    errorMap: () => ({ message: 'Invalid student category' }),\n  }),\n  gender: z.enum(['M', 'F'], {\n    errorMap: () => ({ message: 'Gender must be M or F' }),\n  }),\n  expectedEndDate: z.string().datetime('Expected end date must be a valid ISO datetime').optional(),\n});\n\nexport const CourseEnrollmentUpdateSchema = z.object({\n  status: z.enum(['ACTIVE', 'COMPLETED', 'DROPPED', 'SUSPENDED', 'TRANSFERRED']).optional(),\n  currentLesson: z.number().int().min(1).max(48).optional(),\n  lessonsCompleted: z.number().int().min(0).max(48).optional(),\n  attendanceRate: z.number().min(0).max(1).optional(),\n  currentXP: z.number().int().min(0).optional(),\n  currentLevel:...",
      "lastUpdated": "2025-06-26T18:10:51.381Z"
    }
  },
  "apis": {
    "activities": {
      "path": "H:\\projetos\\academia\\src\\routes\\activities.ts",
      "content": "import { FastifyInstance, FastifyPluginOptions } from 'fastify';\nimport { prisma } from '@/utils/database';\n\n// Helper function to get organization ID dynamically\nasync function getOrganizationId(): Promise<string> {\n  const org = await prisma.organization.findFirst();\n  if (!org) {\n    throw new Error('No organization found');\n  }\n  return org.id;\n}\n\nexport default async function activitiesRoutes(\n  fastify: FastifyInstance,\n  options: FastifyPluginOptions\n) {\n  \n  // GET /api/activities/recent - Get recent activities\n  fastify.get('/recent', {\n    schema: {\n      description: 'Get recent activities',\n      tags: ['Activities']\n    }\n  }, async (request, reply) => {\n    try {\n      const organizationId = await getOrganizationId();\n      \n      // Get recent attendances as activities\n      const recentAttendances = await prisma.attendance.findMany({\n        where: {\n          student: {\n            organizationId\n          },\n          status: 'PRESENT',\n          createdAt: {\n        ...",
      "lastUpdated": "2025-06-29T12:23:01.220Z"
    },
    "analytics": {
      "path": "H:\\projetos\\academia\\src\\routes\\analytics.ts",
      "content": "import { FastifyInstance } from 'fastify';\nimport { AnalyticsController } from '@/controllers/analyticsController';\nimport { validateParams, validateQuery } from '@/middlewares/validation';\nimport { authenticateToken, instructorOrAdmin, allRoles } from '@/middlewares/auth';\nimport { z } from 'zod';\nimport { prisma } from '@/utils/database';\n\n// Helper function to get organization ID dynamically\nasync function getOrganizationId(): Promise<string> {\n  const org = await prisma.organization.findFirst();\n  if (!org) {\n    throw new Error('No organization found');\n  }\n  return org.id;\n}\n\nconst studentIdParamsSchema = z.object({\n  studentId: z.string().uuid('ID do estudante invÃ¡lido'),\n});\n\nconst patternsQuerySchema = z.object({\n  period: z.enum(['week', 'month', 'quarter', 'year']).default('month'),\n  instructorId: z.string().uuid().optional(),\n  courseProgramId: z.string().uuid().optional(),\n});\n\nexport default async function analyticsRoutes(fastify: FastifyInstance) {\n  // Get dropout risk...",
      "lastUpdated": "2025-06-28T21:02:10.315Z"
    },
    "asaas-import": {
      "path": "H:\\projetos\\academia\\src\\routes\\asaas-import.ts",
      "content": "import { FastifyInstance, FastifyPluginOptions } from 'fastify';\n\n// Simple Asaas API integration\nasync function fetchAsaasCustomers() {\n  const apiKey = process.env.ASAAS_API_KEY;\n  const baseUrl = process.env.ASAAS_BASE_URL || 'https://sandbox.asaas.com/api/v3';\n  \n  if (!apiKey) {\n    throw new Error('ASAAS_API_KEY not configured');\n  }\n\n  try {\n    const response = await fetch(`${baseUrl}/customers?limit=100`, {\n      method: 'GET',\n      headers: {\n        'access_token': apiKey,\n        'Content-Type': 'application/json',\n      },\n    });\n\n    if (!response.ok) {\n      throw new Error(`Asaas API error: ${response.status} ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    return data;\n  } catch (error) {\n    console.error('Error fetching Asaas customers:', error);\n    throw error;\n  }\n}\n\nexport default async function asaasImportRoutes(\n  fastify: FastifyInstance,\n  options: FastifyPluginOptions\n) {\n  \n  // GET /api/asaas/customers - List all customers fro...",
      "lastUpdated": "2025-06-29T16:25:09.064Z"
    },
    "asaas-simple": {
      "path": "H:\\projetos\\academia\\src\\routes\\asaas-simple.ts",
      "content": "import { FastifyInstance, FastifyPluginOptions } from 'fastify';\n\nexport default async function asaasSimpleRoutes(\n  fastify: FastifyInstance,\n  options: FastifyPluginOptions\n) {\n  \n  // Check API Key format\n  fastify.get('/validate-key', async (request, reply) => {\n    try {\n      const apiKey = process.env.ASAAS_API_KEY;\n      \n      if (!apiKey) {\n        return {\n          success: false,\n          error: 'API Key not found',\n          suggestion: 'Configure ASAAS_API_KEY in .env file'\n        };\n      }\n\n      // Check API key format\n      const isValidFormat = apiKey.startsWith('$aact_');\n      const keyParts = apiKey.split('::');\n      \n      return {\n        success: true,\n        data: {\n          keyLength: apiKey.length,\n          startsWithAact: isValidFormat,\n          hasCorrectFormat: keyParts.length === 3,\n          keyPreview: `${apiKey.substring(0, 10)}...${apiKey.substring(apiKey.length - 10)}`,\n          parts: keyParts.length,\n          environment: process.env.ASA...",
      "lastUpdated": "2025-06-29T17:08:09.735Z"
    },
    "attendance": {
      "path": "H:\\projetos\\academia\\src\\routes\\attendance.ts",
      "content": "import { FastifyInstance } from 'fastify';\nimport { AttendanceController } from '@/controllers/attendanceController';\nimport { validateBody, validateQuery, validateParams } from '@/middlewares/validation';\nimport { authenticateToken, instructorOrAdmin, allRoles } from '@/middlewares/auth';\nimport { checkInSchema, attendanceHistoryQuerySchema, updateAttendanceSchema, attendanceStatsQuerySchema } from '@/schemas/attendance';\nimport { z } from 'zod';\n\nconst studentIdParamsSchema = z.object({\n  studentId: z.string().uuid('ID do estudante invÃ¡lido'),\n});\n\nconst attendanceIdParamsSchema = z.object({\n  id: z.string().uuid('ID da presenÃ§a invÃ¡lido'),\n});\n\nexport default async function attendanceRoutes(fastify: FastifyInstance) {\n  // Check in to class\n  fastify.post('/checkin', {\n    schema: {\n      tags: ['Attendance'],\n      summary: 'Check in to a class',\n      security: [{ Bearer: [] }],\n      body: {\n        type: 'object',\n        required: ['classId'],\n        properties: {\n          cl...",
      "lastUpdated": "2025-06-26T11:54:45.115Z"
    },
    "auth": {
      "path": "H:\\projetos\\academia\\src\\routes\\auth.ts",
      "content": "import { FastifyInstance } from 'fastify';\nimport { AuthController } from '@/controllers/authController';\nimport { validateBody } from '@/middlewares/validation';\nimport { authenticateToken } from '@/middlewares/auth';\nimport { registerSchema, loginSchema } from '@/schemas/auth';\nimport { z } from 'zod';\n\nconst updatePasswordSchema = z.object({\n  currentPassword: z.string().min(1, 'Senha atual Ã© obrigatÃ³ria'),\n  newPassword: z.string().min(8, 'Nova senha deve ter pelo menos 8 caracteres'),\n});\n\nexport default async function authRoutes(fastify: FastifyInstance) {\n  // Register\n  fastify.post('/register', {\n    schema: {\n      tags: ['Authentication'],\n      summary: 'Register a new user',\n      body: {\n        type: 'object',\n        required: ['email', 'password', 'firstName', 'lastName'],\n        properties: {\n          email: { type: 'string', format: 'email' },\n          password: { type: 'string', minLength: 8 },\n          role: { type: 'string', enum: ['ADMIN', 'INSTRUCTOR', 'STUD...",
      "lastUpdated": "2025-06-26T11:51:54.076Z"
    },
    "billingPlans": {
      "path": "H:\\projetos\\academia\\src\\routes\\billingPlans.ts",
      "content": "import { FastifyInstance, FastifyReply, FastifyRequest } from 'fastify';\nimport { z } from 'zod';\nimport { prisma } from '@/utils/database';\nimport { ResponseHelper } from '@/utils/response';\nimport { logger } from '@/utils/logger';\n\nconst BillingPlanQuerySchema = z.object({\n  active: z.string().optional(),\n  category: z.string().optional(),\n  limit: z.string().optional(),\n});\n\nconst BillingPlanParamsSchema = z.object({\n  id: z.string(),\n});\n\nconst CreateBillingPlanSchema = z.object({\n  name: z.string().min(1),\n  description: z.string().optional(),\n  price: z.number().positive(),\n  billingType: z.enum(['MONTHLY', 'QUARTERLY', 'YEARLY']),\n  features: z.array(z.string()).optional(),\n  classesPerWeek: z.number().int().positive().optional(),\n  hasPersonalTraining: z.boolean().optional().default(false),\n  hasNutrition: z.boolean().optional().default(false),\n  allowFreeze: z.boolean().optional().default(false),\n  isActive: z.boolean().optional().default(true),\n});\n\nexport default async funct...",
      "lastUpdated": "2025-07-22T04:23:05.959Z"
    },
    "class": {
      "path": "H:\\projetos\\academia\\src\\routes\\class.ts",
      "content": "import { FastifyInstance } from 'fastify';\nimport { ClassController } from '@/controllers/classController';\nimport { validateQuery, validateParams, validateBody } from '@/middlewares/validation';\nimport { authenticateToken, instructorOrAdmin, adminOnly, allRoles } from '@/middlewares/auth';\nimport { upcomingClassesQuerySchema, classIdParamsSchema, createClassSchema, updateClassSchema } from '@/schemas/class';\nimport { prisma } from '@/utils/database';\n\nexport default async function classRoutes(fastify: FastifyInstance) {\n  // Root endpoint for diagnostic - Get all classes\n  fastify.get('/', {\n    schema: {\n      tags: ['Classes'],\n      summary: 'Get all classes',\n      response: {\n        200: {\n          type: 'object',\n          properties: {\n            success: { type: 'boolean' },\n            data: { type: 'array' },\n            message: { type: 'string' },\n          },\n        },\n      },\n    },\n    handler: async () => {\n      try {\n        const classes = await prisma.class.fi...",
      "lastUpdated": "2025-07-06T10:55:53.525Z"
    },
    "courses": {
      "path": "H:\\projetos\\academia\\src\\routes\\courses.ts",
      "content": "import { FastifyInstance } from 'fastify';\nimport { z } from 'zod';\nimport { PrismaClient } from '@prisma/client';\n\nconst prisma = new PrismaClient();\n\n// Schema de validaÃ§Ã£o com Zod\nconst courseSchema = z.object({\n  title: z.string().min(5, 'TÃ­tulo deve ter no mÃ­nimo 5 caracteres'),\n  description: z.string().min(20, 'DescriÃ§Ã£o deve ter no mÃ­nimo 20 caracteres'),\n  targetAudience: z.string().min(10, 'PÃºblico-alvo deve ter no mÃ­nimo 10 caracteres'),\n  duration: z.number().int().positive().min(1).max(52, 'DuraÃ§Ã£o deve ser entre 1 e 52 semanas'),\n  category: z.enum(['BEGINNER', 'INTERMEDIATE', 'ADVANCED']),\n  active: z.boolean().default(true)\n});\n\nconst updateCourseSchema = courseSchema.partial();\n\nexport async function coursesRoutes(app: FastifyInstance) {\n  // GET /api/courses - Listar todos os cursos\n  app.get('/api/courses', async (request, reply) => {\n    try {\n      const courses = await prisma.course.findMany({\n        select: {\n          id: true,\n          name: true,\n          d...",
      "lastUpdated": "2025-07-20T22:42:48.489Z"
    },
    "diagnostic": {
      "path": "H:\\projetos\\academia\\src\\routes\\diagnostic.ts",
      "content": "import { FastifyInstance } from 'fastify';\nimport { prisma } from '@/utils/database';\nimport { logger } from '@/utils/logger';\n\nexport const diagnosticRoutes = async (fastify: FastifyInstance) => {\n  // Route alias for diagnostic: /api/courses\n  fastify.get('/api/courses', async () => {\n    try {\n      const courses = await prisma.course.findMany({\n        include: {\n          martialArt: true,\n          _count: {\n            select: {\n              enrollments: true,\n              classes: true\n            }\n          }\n        },\n        orderBy: { createdAt: 'desc' }\n      });\n\n      return {\n        success: true,\n        data: courses.map(course => ({\n          id: course.id,\n          name: course.name,\n          description: course.description,\n          level: course.level,\n          category: course.category,\n          duration: course.duration,\n          classesPerWeek: course.classesPerWeek,\n          totalClasses: course.totalClasses,\n          minAge: course.minAge,\n      ...",
      "lastUpdated": "2025-07-06T10:55:53.524Z"
    },
    "financial": {
      "path": "H:\\projetos\\academia\\src\\routes\\financial.ts",
      "content": "import { FastifyInstance, FastifyPluginOptions } from 'fastify';\nimport { z } from 'zod';\nimport FinancialService from '../services/financialService';\nimport { StudentCategory, BillingType } from '@prisma/client';\n\n// Schemas de validaÃ§Ã£o\nconst createPlanSchema = z.object({\n  name: z.string().min(1),\n  description: z.string().optional(),\n  category: z.nativeEnum(StudentCategory).optional(),\n  price: z.number().positive(),\n  billingType: z.nativeEnum(BillingType),\n  classesPerWeek: z.number().int().positive(),\n  maxClasses: z.number().int().positive().optional(),\n  hasPersonalTraining: z.boolean().optional(),\n  hasNutrition: z.boolean().optional()\n});\n\nconst createSubscriptionSchema = z.object({\n  studentId: z.string().uuid(),\n  planId: z.string().uuid(),\n  startDate: z.string().datetime().optional(),\n  customPrice: z.number().positive().optional()\n});\n\nconst financialReportSchema = z.object({\n  startDate: z.string().datetime(),\n  endDate: z.string().datetime()\n});\n\nconst webhookSchema ...",
      "lastUpdated": "2025-06-28T03:09:59.444Z"
    },
    "financialResponsible": {
      "path": "H:\\projetos\\academia\\src\\routes\\financialResponsible.ts",
      "content": "import { FastifyInstance, FastifyPluginOptions } from 'fastify';\nimport { z } from 'zod';\nimport FinancialResponsibleService from '../services/financialResponsibleService';\nimport { prisma } from '@/utils/database';\n\n// Helper function to get organization ID dynamically\nasync function getOrganizationId(): Promise<string> {\n  const org = await prisma.organization.findFirst();\n  if (!org) {\n    throw new Error('No organization found');\n  }\n  return org.id;\n}\n\n// Schemas de validaÃ§Ã£o\nconst createFinancialResponsibleSchema = z.object({\n  name: z.string().min(1),\n  cpfCnpj: z.string().min(11),\n  email: z.string().email(),\n  phone: z.string().optional(),\n  birthDate: z.string().datetime().optional(),\n  address: z.string().optional(),\n  addressNumber: z.string().optional(),\n  complement: z.string().optional(),\n  neighborhood: z.string().optional(),\n  city: z.string().optional(),\n  state: z.string().optional(),\n  zipCode: z.string().optional(),\n  relationshipType: z.string().optional()\n});\n\nco...",
      "lastUpdated": "2025-06-28T20:59:35.628Z"
    },
    "organizations": {
      "path": "H:\\projetos\\academia\\src\\routes\\organizations.ts",
      "content": "import { FastifyInstance, FastifyPluginOptions } from 'fastify';\nimport { prisma } from '@/utils/database';\n\nexport default async function organizationsRoutes(\n  fastify: FastifyInstance,\n  options: FastifyPluginOptions\n) {\n  \n  // GET /api/organizations - List organizations\n  fastify.get('/', {\n    schema: {\n      description: 'List organizations',\n      tags: ['Organizations']\n    }\n  }, async (request, reply) => {\n    try {\n      const organizations = await prisma.organization.findMany({\n        select: {\n          id: true,\n          name: true,\n          email: true,\n          phone: true,\n          isActive: true,\n          createdAt: true\n        }\n      });\n\n      return {\n        success: true,\n        data: organizations\n      };\n    } catch (error) {\n      reply.code(500);\n      return {\n        success: false,\n        error: 'Failed to fetch organizations',\n        message: error instanceof Error ? error.message : 'Unknown error'\n      };\n    }\n  });\n}...",
      "lastUpdated": "2025-06-28T21:00:16.182Z"
    },
    "pedagogical": {
      "path": "H:\\projetos\\academia\\src\\routes\\pedagogical.ts",
      "content": "import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { z } from 'zod';\nimport { UserRole } from '@/types';\nimport { checkTenantAccess, addTenantFilter } from '@/middlewares/tenant';\nimport { ProgressionService } from '@/services/progressionService';\nimport { GamificationService } from '@/services/gamificationService';\nimport { AchievementService } from '@/services/achievementService';\nimport { ChallengeService } from '@/services/challengeService';\nimport { prisma } from '@/utils/database';\nimport { ResponseHelper } from '@/utils/response';\nimport { logger } from '@/utils/logger';\n\n// Validation schemas\nconst CourseEnrollmentSchema = z.object({\n  studentId: z.string().uuid(),\n  courseId: z.string().uuid(),\n  category: z.enum(['ADULT', 'MASTER_1', 'MASTER_2', 'MASTER_3', 'HERO_1', 'HERO_2', 'HERO_3']),\n  gender: z.enum(['M', 'F']),\n  expectedEndDate: z.string().datetime().optional(),\n});\n\nconst TechniqueProgressSchema = z.object({\n  enrollmentId: z.string().uui...",
      "lastUpdated": "2025-06-27T00:53:54.034Z"
    },
    "progress": {
      "path": "H:\\projetos\\academia\\src\\routes\\progress.ts",
      "content": "import { FastifyInstance, FastifyRequest, FastifyReply } from 'fastify';\nimport { z } from 'zod';\nimport { prisma } from '@/utils/database';\nimport { ResponseHelper } from '@/utils/response';\nimport { logger } from '@/utils/logger';\n\n// Validation schemas\nconst StudentProgressParamsSchema = z.object({\n  studentId: z.string().uuid(),\n  courseId: z.string().uuid(),\n});\n\nconst ProgressRecordSchema = z.object({\n  studentId: z.string().uuid(),\n  courseId: z.string().uuid(),\n  lessonNumber: z.number().int().min(1).max(48),\n  techniquesLearned: z.array(z.string()).optional().default([]),\n  challengesCompleted: z.array(z.string()).optional().default([]),\n  points: z.number().int().min(0).optional().default(0),\n  reflections: z.string().optional(),\n  notes: z.string().optional(), // Legacy field, maps to reflections\n  completed: z.boolean().optional().default(false),\n});\n\nconst LessonTechniquesParamsSchema = z.object({\n  courseId: z.string().uuid(),\n  lessonNumber: z.string().transform(Number),...",
      "lastUpdated": "2025-06-28T17:09:52.268Z"
    },
    "students": {
      "path": "H:\\projetos\\academia\\src\\routes\\students.ts",
      "content": "import { FastifyInstance, FastifyPluginOptions } from 'fastify';\nimport { prisma } from '@/utils/database';\nimport FinancialService from '../services/financialService';\n\n// Helper function to get organization ID dynamically\nasync function getOrganizationId(): Promise<string> {\n  const org = await prisma.organization.findFirst();\n  if (!org) {\n    throw new Error('No organization found');\n  }\n  return org.id;\n}\n\n// Helper function to generate a temporary password\nasync function generateTempPassword(): Promise<string> {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n  let result = '';\n  for (let i = 0; i < 8; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n}\n\nexport default async function studentsRoutes(\n  fastify: FastifyInstance,\n  options: FastifyPluginOptions\n) {\n  \n  // GET /api/students - List all students\n  fastify.get('/', {\n    schema: {\n      description: 'List all students',\n      tags: ['Stud...",
      "lastUpdated": "2025-07-24T02:46:01.601Z"
    },
    "techniques": {
      "path": "H:\\projetos\\academia\\src\\routes\\techniques.ts",
      "content": "import { FastifyInstance, FastifyReply, FastifyRequest } from 'fastify';\nimport { z } from 'zod';\nimport { prisma } from '@/utils/database';\nimport { ResponseHelper } from '@/utils/response';\nimport { logger } from '@/utils/logger';\n\nconst TechniqueQuerySchema = z.object({\n  category: z.string().optional(),\n  difficulty: z.string().optional(),\n  limit: z.string().optional(),\n});\n\nconst TechniqueParamsSchema = z.object({\n  id: z.string(),\n});\n\nexport default async function techniqueRoutes(fastify: FastifyInstance) {\n  // Get all techniques\n  fastify.get('/api/techniques', {\n    schema: {\n      tags: ['Techniques'],\n      summary: 'Get all techniques',\n      querystring: {\n        type: 'object',\n        properties: {\n          category: { type: 'string' },\n          difficulty: { type: 'string' },\n          limit: { type: 'string' }\n        }\n      },\n      response: {\n        200: {\n          type: 'object',\n          properties: {\n            success: { type: 'boolean' },\n            ...",
      "lastUpdated": "2025-07-06T03:31:07.843Z"
    }
  }
}