<div class="module-isolated-container" id="plansContainer" data-module="plans">
    <!-- Breadcrumb -->
    <nav class="module-isolated-breadcrumb" aria-label="Breadcrumb">
        <ol>
            <li><a href="#dashboard" class="module-isolated-link">Home</a></li>
            <li aria-current="page">Planos</li>
        </ol>
    </nav>

    <!-- Header conforme Guidelines.MD - Full Screen + Navigation Visible -->
    <header class="module-isolated-header" role="banner">
        <h1 class="module-isolated-text-2xl module-isolated-font-bold module-isolated-text-primary module-isolated-mb-sm">
            Gest√£o de Planos
        </h1>
        <p class="module-isolated-text-secondary" id="plans-subtitle">
            Gerencie planos de treinamento, categorias e vincula√ß√µes com alunos
        </p>
    </header>

    <div class="module-isolated-content" role="main">
        <!-- Toolbar conforme Guidelines.MD -->
        <div class="module-isolated-toolbar module-isolated-mb-lg">
            <button id="btn-new-plan" class="module-isolated-btn-primary" aria-label="Criar novo plano" onclick="window.openNewPlanForm && window.openNewPlanForm()">
                ‚ûï Novo Plano
            </button>
            <div class="module-isolated-search module-isolated-flex module-isolated-gap-sm" role="search">
                <input type="text" 
                       placeholder="Buscar plano por nome ou categoria..." 
                       id="planSearch"
                       class="module-isolated-input" aria-label="Buscar planos">
                <button id="btn-search-plans" class="module-isolated-btn-secondary" aria-label="Buscar planos">
                    üîç Buscar
                </button>
            </div>
        </div>

        <!-- Student subscription context (rendered dynamically if studentId is present) -->
        <div class="module-isolated-card module-isolated-mb-lg" id="student-subscription-context" style="display:none" aria-live="polite"></div>

        <!-- Stats Cards conforme Guidelines.MD -->
        <div class="module-isolated-grid module-isolated-mb-lg" role="region" aria-label="Resumo dos Planos">
            <div class="module-isolated-stat-card">
                <div class="module-isolated-stat-number stat-skeleton" id="totalPlans">‚Äî</div>
                <div class="module-isolated-stat-label">Planos Cadastrados</div>
            </div>
            <div class="module-isolated-stat-card">
                <div class="module-isolated-stat-number stat-skeleton" id="activePlans">‚Äî</div>
                <div class="module-isolated-stat-label">Planos Ativos</div>
            </div>
            <div class="module-isolated-stat-card">
                <div class="module-isolated-stat-number stat-skeleton" id="totalSubscribers">‚Äî</div>
                <div class="module-isolated-stat-label">Alunos Vinculados</div>
            </div>
            <div class="module-isolated-stat-card">
                <div class="module-isolated-stat-number stat-skeleton" id="revenueTotal">‚Äî</div>
                <div class="module-isolated-stat-label">Receita Estimada</div>
            </div>
        </div>

        <!-- Table conforme Guidelines.MD -->
        <div class="module-isolated-card">
            <table class="module-isolated-table" aria-label="Tabela de Planos">
                <thead>
                    <tr>
                        <th scope="col">Nome do Plano</th>
                        <th scope="col">Categoria</th>
                        <th scope="col">Agenda/Hor√°rios</th>
                        <th scope="col">Valor Mensal</th>
                        <th scope="col">Alunos</th>
                        <th scope="col">Status</th>
                        <th scope="col">A√ß√µes</th>
                    </tr>
                </thead>
                <tbody id="plansTableBody">
                    <tr>
                        <td colspan="7">
                            <div class="module-isolated-loading">
                                <div class="module-isolated-spinner" aria-hidden="true"></div>
                                Carregando planos...
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Editor de planos (Full-Screen conforme Guidelines.MD) -->
        <div class="module-isolated-card module-isolated-mt-lg" id="plan-editor-container" style="display:none">
            <div class="module-isolated-card-header">
                <h3 class="module-isolated-card-title">Editor de Plano</h3>
                <p class="module-isolated-card-subtitle">Preencha as informa√ß√µes do plano de treinamento</p>
            </div>
            <div class="module-isolated-card-body" id="plan-editor-content">
                <!-- Editor ser√° injetado aqui via JavaScript -->
            </div>
        </div>
    </div>
</div>