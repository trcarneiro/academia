<link rel="stylesheet" href="/css/modules/dashboard-premium.css">

<div class="dashboard-container">
    <!-- Header -->
    <div class="dashboard-grid">
        <div class="dashboard-header-section">
            <div class="dashboard-title">
                <h1>Dashboard Geral</h1>
                <p id="lastUpdated">Atualizado agora</p>
            </div>
            <div class="header-actions">
                <button id="refreshDashboardBtn" class="btn-ai-action">
                    ğŸ”„ Atualizar
                </button>
            </div>
        </div>

        <!-- AI Briefing Widget -->
        <div class="widget-ai-briefing" id="aiBriefingWidget">
            <div class="ai-avatar">ğŸ¤–</div>
            <div class="ai-content">
                <h3>Bom dia!</h3>
                <p id="aiBriefingText">Analisando dados da academia para gerar seu resumo diÃ¡rio...</p>
                <div class="ai-actions">
                    <button class="btn-ai-action" onclick="window.agentDashboardWidget.toggle()">ğŸ’¬ Conversar com Agente</button>
                    <button class="btn-ai-action" onclick="generateReport()">ğŸ“Š Ver RelatÃ³rio Completo</button>
                </div>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="widget-stats">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon blue">ğŸ‘¥</div>
                    <span class="stat-trend trend-up">â†— +2 este mÃªs</span>
                </div>
                <div class="stat-value" id="totalStudents">--</div>
                <div class="stat-label">Total de Alunos</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon green">âœ…</div>
                    <span class="stat-trend trend-up">â†— 98% ativos</span>
                </div>
                <div class="stat-value" id="activeStudents">--</div>
                <div class="stat-label">Alunos Ativos</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon purple">ğŸ’°</div>
                    <span class="stat-trend trend-up">â†— R$ --</span>
                </div>
                <div class="stat-value" id="monthlyRevenue">R$ --</div>
                <div class="stat-label">Receita Mensal (Est.)</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-icon orange">ğŸ“…</div>
                    <span class="stat-trend trend-up">â†— -- hoje</span>
                </div>
                <div class="stat-value" id="todayAttendances">--</div>
                <div class="stat-label">PresenÃ§as Hoje</div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="widget-main">
            <!-- Agenda / Upcoming Classes -->
            <div class="content-card">
                <div class="card-header">
                    <h3>ğŸ“… PrÃ³ximas Aulas</h3>
                    <button class="btn-ai-action" onclick="navigateToModule('agenda')">Ver Agenda</button>
                </div>
                <div class="agenda-list" id="agendaList">
                    <div class="agenda-item">
                        <div class="agenda-time">--:--</div>
                        <div class="agenda-info">
                            <div class="agenda-title">Carregando...</div>
                            <div class="agenda-subtitle">--</div>
                        </div>
                        <div class="agenda-status">--</div>
                    </div>
                </div>
            </div>

            <!-- Financial Overview (Placeholder for Chart) -->
            <div class="content-card">
                <div class="card-header">
                    <h3>ğŸ’° Fluxo de Caixa (Ãšltimos 30 dias)</h3>
                    <button class="btn-ai-action" onclick="navigateToModule('financial')">Detalhes</button>
                </div>
                <div style="height: 200px; display: flex; align-items: center; justify-content: center; background: #F8FAFC; border-radius: 8px; color: #94A3B8;">
                    GrÃ¡fico Financeiro (Em Breve)
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="widget-sidebar">
            <!-- Quick Actions -->
            <div class="content-card">
                <div class="card-header">
                    <h3>âš¡ AÃ§Ãµes RÃ¡pidas</h3>
                </div>
                <div class="actions-grid">
                    <div class="action-card" onclick="navigateToModule('students', { action: 'new' })">
                        <span class="action-card-icon">ğŸ‘¤</span>
                        <span class="action-card-text">Novo Aluno</span>
                    </div>
                    <div class="action-card" onclick="navigateToModule('attendance')">
                        <span class="action-card-icon">âœ…</span>
                        <span class="action-card-text">PresenÃ§a</span>
                    </div>
                    <div class="action-card" onclick="navigateToModule('financial', { action: 'new' })">
                        <span class="action-card-icon">ğŸ’³</span>
                        <span class="action-card-text">Receber</span>
                    </div>
                    <div class="action-card" onclick="navigateToModule('turmas')">
                        <span class="action-card-icon">ğŸ“…</span>
                        <span class="action-card-text">Turmas</span>
                    </div>
                </div>
            </div>

            <!-- Retention Alert -->
            <div class="content-card">
                <div class="card-header">
                    <h3>âš ï¸ Risco de EvasÃ£o</h3>
                </div>
                <div class="retention-list" id="retentionList">
                    <div style="text-align: center; color: #64748B; padding: 12px;">
                        Analisando frequÃªncia...
                    </div>
                </div>
            </div>
            
            <!-- Agent Widget Container (Hidden but functional) -->
            <div id="agent-dashboard-widget" style="display: none;"></div>
        </div>
    </div>
</div>