<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Editor de Plano</title>
  <!-- Sistema Base Padronizado -->
  <link rel="stylesheet" href="../css/base/module-system.css" />
  <link rel="stylesheet" href="../css/modules/plan-editor-padronizado.css" />
</head>
<body>
  <!-- Container Base Padronizado -->
  <div class="module-isolated-base">
    <!-- Header Padronizado -->
    <div class="module-isolated-header">
      <h1 class="module-isolated-title">
        <span class="module-isolated-icon">ğŸ“‹</span>
        <span id="pageTitle">Editor de Planos</span>
      </h1>
      <div class="module-isolated-actions">
        <button id="savePlanHeaderBtn" type="button" class="module-isolated-btn-primary">ğŸ’¾ Salvar</button>
        <button id="backBtn" class="module-isolated-btn-secondary">â† Voltar</button>
      </div>
    </div>

    <!-- ConteÃºdo Padronizado -->
    <div class="module-isolated-content">
      
      <!-- Loading State -->
      <div id="loadingState" class="module-isolated-loading">
        <div class="module-isolated-loading-spinner"></div>
        Carregando dados do plano...
      </div>

      <!-- Sistema de Abas -->
      <nav id="planTabs" class="plan-editor-tabs">
        <div class="plan-editor-tab active" data-tab="details">ğŸ“ Detalhes</div>
        <div class="plan-editor-tab" data-tab="courses" id="coursesTabBtn">ğŸ“š Cursos</div>
      </nav>

      <!-- ConteÃºdo das Abas -->
      <section id="planTabPanels" class="plan-editor-tab-panels">
        
        <!-- Aba Detalhes -->
        <div class="plan-editor-tab-panel active" data-panel="details">
          <main id="mainContent">
            <form id="plan-form" class="module-isolated-form">
              
              <div class="module-isolated-form-section">
                <h3>â„¹ï¸ InformaÃ§Ãµes Gerais</h3>
                <div class="module-isolated-form-group">
                  <label class="module-isolated-label" for="planName">Nome do Plano</label>
                  <input type="text" id="planName" name="planName" class="module-isolated-input" required />
                </div>
                <div class="module-isolated-form-group">
                  <label class="module-isolated-label" for="planDescription">DescriÃ§Ã£o</label>
                  <textarea id="planDescription" name="planDescription" class="module-isolated-textarea" rows="3"></textarea>
                </div>
              </div>

              <div class="module-isolated-form-section">
                <h3>ğŸ’° Detalhes Financeiros</h3>
                <div class="module-isolated-form-row">
                  <div class="module-isolated-form-group">
                    <label class="module-isolated-label" for="planPrice">PreÃ§o (R$)</label>
                    <input type="number" step="0.01" id="planPrice" name="planPrice" class="module-isolated-input" required />
                  </div>
                  <div class="module-isolated-form-group">
                    <label class="module-isolated-label" for="planBillingType">CobranÃ§a</label>
                    <select id="planBillingType" name="planBillingType" class="module-isolated-select" required>
                      <option value="">Selecione</option>
                      <option value="MONTHLY">Mensal</option>
                      <option value="QUARTERLY">Trimestral</option>
                      <option value="YEARLY">Anual</option>
                      <option value="WEEKLY">Semanal</option>
                    </select>
                  </div>
                  <div class="module-isolated-form-group">
                    <label class="module-isolated-label" for="planClassesPerWeek">Aulas/semana</label>
                    <input type="number" id="planClassesPerWeek" name="planClassesPerWeek" class="module-isolated-input" min="0" />
                  </div>
                </div>
                <div class="module-isolated-form-group">
                  <label class="module-isolated-label" for="planCategory">Categoria</label>
                  <select id="planCategory" name="planCategory" class="module-isolated-select">
                    <option value="">Selecione</option>
                    <option value="ADULT">Adulto</option>
                    <option value="FEMALE">Feminino</option>
                    <option value="SENIOR">Senior</option>
                    <option value="CHILD">Infantil</option>
                  </select>
                </div>
              </div>

              <div class="module-isolated-form-actions">
                <button type="button" id="deletePlanBtn" class="module-isolated-btn-danger">ğŸ—‘ï¸ Excluir</button>
                <button type="submit" id="savePlanBtn" class="module-isolated-btn-primary">ğŸ’¾ Salvar</button>
              </div>
            </form>
          </main>
        </div>

        <!-- Aba Cursos -->
        <div class="plan-editor-tab-panel" data-panel="courses" id="coursesPanel">
          <div class="plan-editor-courses-header">
            <h3>ğŸ“š Cursos do Plano</h3>
            <p class="plan-editor-help">Vincule cursos que os alunos deste plano terÃ£o acesso.</p>
          </div>
          
          <div id="coursesPanelContent">
            <div id="coursesLoading" class="module-isolated-loading">
              <div class="module-isolated-loading-spinner"></div>
              Carregando cursos...
            </div>
            
            <div id="coursesAssociation" class="plan-editor-courses-association">
              <div class="plan-editor-courses-col">
                <div class="plan-editor-courses-header">
                  <span>ğŸ“‹ DisponÃ­veis</span>
                  <span id="availableCount" class="plan-editor-count-badge">0</span>
                </div>
                <div class="plan-editor-courses-toolbar">
                  <input type="search" id="searchAvailableCourses" class="module-isolated-input" placeholder="ğŸ” Filtrar cursos..." />
                </div>
                <ul id="availableCoursesList" class="plan-editor-course-list"></ul>
                <div id="availableEmptyState" class="module-isolated-empty">
                  <div class="module-isolated-empty-icon">ğŸ“š</div>
                  <div class="module-isolated-empty-title">Nenhum curso disponÃ­vel</div>
                </div>
              </div>
              
              <div class="plan-editor-assoc-actions">
                <button id="addCourseBtn" class="module-isolated-btn-primary">Adicionar â†’</button>
                <button id="removeCourseBtn" class="module-isolated-btn-secondary">â† Remover</button>
              </div>
              
              <div class="plan-editor-courses-col">
                <div class="plan-editor-courses-header">
                  <span>âœ… Associados</span>
                  <span id="linkedCount" class="plan-editor-count-badge">0</span>
                </div>
                <div class="plan-editor-courses-toolbar">
                  <input type="search" id="searchLinkedCourses" class="module-isolated-input" placeholder="ğŸ” Filtrar associados..." />
                </div>
                <ul id="linkedCoursesList" class="plan-editor-course-list"></ul>
                <div id="linkedEmptyState" class="module-isolated-empty">
                  <div class="module-isolated-empty-icon">ğŸ“š</div>
                  <div class="module-isolated-empty-title">Nenhum curso associado</div>
                  <div class="module-isolated-empty-description">Adicione cursos da lista disponÃ­vel</div>
                </div>
              </div>
            </div>
            
            <div id="coursesDiffBar" class="plan-editor-save-bar">
              <div class="plan-editor-save-info">
                <strong>âš ï¸ AlteraÃ§Ãµes pendentes:</strong> 
                <span id="diffSummary"></span>
              </div>
              <div class="plan-editor-save-actions">
                <button id="discardCoursesChangesBtn" class="module-isolated-btn-secondary" type="button">âŒ Descartar</button>
                <button id="saveCoursesChangesBtn" class="module-isolated-btn-primary" type="button">ğŸ’¾ Salvar</button>
              </div>
            </div>
          </div>
        </div>
        
      </section>
    </div>
  </div>

  <!-- Removed duplicate script include; SPA router loads plan-editor.js -->
</body>
</html>
