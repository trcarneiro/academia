<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Bot√£o Adicionar Instrutor</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/modules/instructors.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <h1>üß™ Teste - Bot√£o Adicionar Instrutor</h1>
        
        <div style="margin-bottom: 2rem; padding: 1rem; background: #e3f2fd; border-radius: 8px;">
            <h3>üìã Testes Dispon√≠veis</h3>
            <button onclick="testListModule()" class="btn-primary">1Ô∏è‚É£ Testar M√≥dulo de Lista</button>
            <button onclick="testEditorModule()" class="btn-primary">2Ô∏è‚É£ Testar Editor de Instrutor</button>
            <button onclick="testNavigation()" class="btn-primary">3Ô∏è‚É£ Testar Navega√ß√£o</button>
        </div>
        
        <div id="test-container" style="min-height: 600px; border: 2px solid #e9ecef; border-radius: 8px; padding: 1rem;">
            <p>Clique em um dos bot√µes acima para iniciar o teste.</p>
        </div>
        
        <div style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
            <h3>üîß Debug Info</h3>
            <div id="debug-info">
                <p>Status: <span id="status">Aguardando teste...</span></p>
                <p>Navega√ß√£o: <span id="nav-status">Verificando...</span></p>
                <p>API: <span id="api-status">Verificando...</span></p>
                <p>M√≥dulo: <span id="module-status">Verificando...</span></p>
            </div>
        </div>
    </div>

    <!-- Core Scripts -->
    <script src="/js/shared/api-client.js"></script>
    <script src="/js/shared/utils.js"></script>
    
    <!-- Module Scripts -->
    <script src="/js/modules/instructors/controllers/InstructorsController.js"></script>
    <script src="/js/modules/instructors/index.js"></script>
    <script src="/js/modules/instructors/instructor-editor-new.js"></script>

    <script>
        // Test Functions
        async function testListModule() {
            const container = document.getElementById('test-container');
            const status = document.getElementById('status');
            
            try {
                status.textContent = 'Testando m√≥dulo de lista...';
                container.innerHTML = '';
                
                // Initialize the instructors module
                if (window.initInstructorsModule) {
                    await window.initInstructorsModule(container);
                    status.textContent = 'M√≥dulo de lista carregado! ‚úÖ';
                    status.style.color = 'green';
                } else {
                    throw new Error('initInstructorsModule n√£o encontrado');
                }
                
            } catch (error) {
                console.error('Erro no teste:', error);
                status.textContent = `Erro: ${error.message}`;
                status.style.color = 'red';
                
                container.innerHTML = `
                    <div style="color: red; padding: 2rem; text-align: center;">
                        <h3>‚ùå Erro no Teste</h3>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }

        async function testEditorModule() {
            const container = document.getElementById('test-container');
            const status = document.getElementById('status');
            
            try {
                status.textContent = 'Carregando editor de instrutor...';
                
                // Load the editor HTML
                const response = await fetch('/js/modules/instructors/views/instructor-editor-new.html');
                const html = await response.text();
                container.innerHTML = html;
                
                // Initialize the editor
                if (window.instructorEditor) {
                    await window.instructorEditor.initialize();
                    status.textContent = 'Editor carregado! ‚úÖ';
                    status.style.color = 'green';
                } else {
                    throw new Error('instructorEditor n√£o encontrado');
                }
                
            } catch (error) {
                console.error('Erro no teste:', error);
                status.textContent = `Erro: ${error.message}`;
                status.style.color = 'red';
                
                container.innerHTML = `
                    <div style="color: red; padding: 2rem; text-align: center;">
                        <h3>‚ùå Erro no Teste do Editor</h3>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }

        function testNavigation() {
            const container = document.getElementById('test-container');
            const status = document.getElementById('status');
            
            status.textContent = 'Testando navega√ß√£o...';
            
            container.innerHTML = `
                <div style="padding: 2rem;">
                    <h3>üß≠ Teste de Navega√ß√£o</h3>
                    <p>Testando diferentes m√©todos de navega√ß√£o:</p>
                    
                    <div style="margin: 1rem 0;">
                        <button onclick="testHashNavigation()" class="btn-primary">Hash Navigation (#/instructors/new)</button>
                        <button onclick="testWindowLocation()" class="btn-primary">Window Location</button>
                        <button onclick="testCustomNavigate()" class="btn-primary">Custom Navigate Function</button>
                    </div>
                    
                    <div id="nav-results" style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 4px;">
                        <p>Clique em um dos bot√µes acima para testar a navega√ß√£o.</p>
                    </div>
                </div>
            `;
            
            status.textContent = 'Teste de navega√ß√£o pronto! ‚úÖ';
            status.style.color = 'green';
        }

        function testHashNavigation() {
            const results = document.getElementById('nav-results');
            results.innerHTML = '<p>üîÑ Testando navega√ß√£o por hash...</p>';
            
            try {
                window.location.href = '#/instructors/new';
                results.innerHTML = '<p>‚úÖ Hash navigation executada: #/instructors/new</p>';
            } catch (error) {
                results.innerHTML = `<p>‚ùå Erro na hash navigation: ${error.message}</p>`;
            }
        }

        function testWindowLocation() {
            const results = document.getElementById('nav-results');
            results.innerHTML = '<p>üîÑ Testando window.location...</p>';
            
            try {
                window.location.assign('#/instructors/new');
                results.innerHTML = '<p>‚úÖ Window.location executada</p>';
            } catch (error) {
                results.innerHTML = `<p>‚ùå Erro no window.location: ${error.message}</p>`;
            }
        }

        function testCustomNavigate() {
            const results = document.getElementById('nav-results');
            results.innerHTML = '<p>üîÑ Testando fun√ß√£o personalizada...</p>';
            
            try {
                if (window.navigateTo) {
                    window.navigateTo('/instructors/new');
                    results.innerHTML = '<p>‚úÖ Fun√ß√£o navigateTo executada</p>';
                } else {
                    results.innerHTML = '<p>‚ö†Ô∏è Fun√ß√£o navigateTo n√£o encontrada, usando fallback</p>';
                    window.location.href = '#/instructors/new';
                }
            } catch (error) {
                results.innerHTML = `<p>‚ùå Erro na navega√ß√£o personalizada: ${error.message}</p>`;
            }
        }

        // Auto-checks
        window.addEventListener('load', () => {
            // Check navigation
            setTimeout(() => {
                const navStatus = document.getElementById('nav-status');
                if (window.navigateTo) {
                    navStatus.textContent = 'navigateTo dispon√≠vel ‚úÖ';
                    navStatus.style.color = 'green';
                } else {
                    navStatus.textContent = 'navigateTo n√£o encontrado, usando fallback ‚ö†Ô∏è';
                    navStatus.style.color = 'orange';
                }
            }, 500);

            // Check API
            setTimeout(() => {
                const apiStatus = document.getElementById('api-status');
                if (window.createModuleAPI) {
                    apiStatus.textContent = 'API Client dispon√≠vel ‚úÖ';
                    apiStatus.style.color = 'green';
                } else {
                    apiStatus.textContent = 'API Client n√£o encontrado ‚ùå';
                    apiStatus.style.color = 'red';
                }
            }, 1000);

            // Check module
            setTimeout(() => {
                const moduleStatus = document.getElementById('module-status');
                if (window.InstructorsModule && window.instructorEditor) {
                    moduleStatus.textContent = 'M√≥dulos carregados ‚úÖ';
                    moduleStatus.style.color = 'green';
                } else {
                    moduleStatus.textContent = 'Alguns m√≥dulos n√£o carregados ‚ö†Ô∏è';
                    moduleStatus.style.color = 'orange';
                }
            }, 1500);
        });
    </script>
</body>
</html>